var H=Object.defineProperty;var k=(e,n,t)=>n in e?H(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t;var l=(e,n,t)=>k(e,typeof n!="symbol"?n+"":n,t);import{a as P,f as T,c as X,e as a,g,r as M,b as N,R,A as I}from"./JSTools-CLlqArog.js";class B extends P{constructor(t,i,d){super(t,i,10);l(this,"index");l(this,"color");l(this,"speed");l(this,"speedX");l(this,"speedY");l(this,"directionX");l(this,"directionY");l(this,"slope");this.index=d,this.color="blue",this.speed=2,this.speedX=T(-this.speed,this.speed,.1),this.speedY=Math.sqrt(Math.pow(this.speed,2)-Math.pow(this.speedX,2)),this.directionX=Math.sign(this.speedX),this.directionY=Math.sign(this.speedY),this.slope=this.speedY/this.speedX,T(0,1,1)===1&&(this.speedY*=-1)}setSpeed(t){this.speed=t,this.speedY!==0&&this.speedX!==0&&(this.slope=this.speedY/this.speedX),this.speedX=Math.cos(Math.atan(this.slope))*t,this.speedY=Math.sqrt(Math.pow(this.speed,2)-Math.pow(this.speedX,2)),this.speedX=Math.abs(this.speedX)*this.directionX,this.speedY=Math.abs(this.speedY)*this.directionY}goToRandomPos(t){this.goTo(Math.random()*(t.width-this.radius*2),Math.random()*(t.height-this.radius*2))}checkPos(t,i){if(this.x>i.width-this.radius&&(this.directionX=-1,this.speedX=Math.abs(this.speedX)*this.directionX),this.x<this.radius&&(this.directionX=1,this.speedX=Math.abs(this.speedX)*this.directionX),this.y>i.height-this.radius&&(this.directionY=-1,this.speedY=Math.abs(this.speedY)*this.directionY),this.y<this.radius&&(this.directionY=1,this.speedY=Math.abs(this.speedY)*this.directionY),t.length>1){for(let u=0;u<t.length;u++)if(this.index!==u){var d=X(t[u].x,t[u].y,this.x,this.y);if(d<t[u].radius+this.radius){var p=(t[u].y-this.y)/(t[u].x-this.x),c=this.speedY-p*this.speedX,f=-(1/p),v=0;this.speedX=(v-c)/(p-f)+((v-c)/(p-f)-this.speedX),this.speedY=p*((v-c)/(p-f))+c+(p*((v-c)/(p-f))+c-this.speedY),this.speedY!==0&&this.speedX!==0&&(this.slope=this.speedY/this.speedX),this.directionX=Math.sign(this.speedX),this.directionY=Math.sign(this.speedY)}}}}updatePos(t,i){for(let d=0;d<this.speed*10;d++)this.x+=this.speedX/(this.speed*10),this.y+=this.speedY/(this.speed*10),this.checkPos(t,i)}}function b(e){switch(e){case"en":document.cookie="language="+e+"; expires=Thu, 01 Jan 2040 00:00:00 UTC; path=/;",document.title="Animation 1",canvas.innerHTML="Your browser doesn't support the HTML5 canvas tag.",a("backToIndex").innerHTML="Back",a("reloadButton").innerHTML="Reload",a("speed").innerHTML="Speed: ",a("speedBox").title="Ball(s) speed.",a("randomPosition").innerHTML="Randomize Position",a("randomSpeed").innerHTML="Randomize Speed",a("balls").innerHTML="Balls: ",a("ballsBox").title="Number of balls in the animation.";break;default:document.cookie="language=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("language"),document.title="Animação 1",canvas.innerHTML="O teu browser não suporta a tag canvas do HTML5.",a("backToIndex").innerHTML="Voltar",a("reloadButton").innerHTML="Recarregar",a("speed").innerHTML="Velocidade: ",a("speedBox").title="Velocidade da(s) bola(s).",a("randomPosition").innerHTML="Aleatorizar Posição",a("randomSpeed").innerHTML="Aleatorizar Velocidade",a("balls").innerHTML="Bolas: ",a("ballsBox").title="Número de bolas na animação.";break}}var Y=a("dropdownLanguage");g("language")!=null&&g("language")!=""?Y.value=g("language"):Y.value="pt";const w=a("canvas");if(w==null)throw new Error("Canvas is null.");window.globals.canvas=w;var h=a("speedBox"),O=a("randomPosition"),C=a("randomSpeed"),o=a("ballsBox");const L=window.globals.toolBarHeight;document.body.onresize=M;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{M(),b(g("language"))}):(M(),b(g("language")));o.value=String(1);a("toolBar").style.height=L+"px";w.style.top=L+"px";b(g("language"));a("backToIndex").onclick=N;a("reloadButton").onclick=()=>location.reload(!0);Y.onchange=()=>b(Y.value);var r=new R(50,50,840,483);r.outlineWidth=2;r.outlinePosition="center";const y=window.globals.canvas,S=window.globals.canvas.getContext("2d");y.width=r.x*2+r.width;y.height=r.y*2+r.height;var s=[];window.globals.numberOfBalls=o.value;for(let e=0;e<window.globals.numberOfBalls;e++)s[e]=new B(0,0,e);for(let e=0;e<s.length;e++)s[e].goToRandomPos(r);m(s[0].speed);M();I(function(){r.draw(),S.translate(r.x,r.y);for(let e=0;e<s.length;e++)s[e].draw(),s[e].updatePos(s,r)});function m(e){e>Number(h.max)&&(e=Number(h.max)),e<Number(h.min)&&(e=Number(h.min)),e=Math.floor(e*10)/10,h.value=String(e);for(let n=0;n<s.length;n++)s[n].setSpeed(e)}let x;h.oninput=function(){m(+h.value)};O.onclick=function(){for(let t=0;t<s.length;t++){s[t].goToRandomPos(r);var e=!1;for(let i=0;i<s.length;i++)if(t!==i)try{var n=X(s[i].x,s[i].y,s[t].x,s[t].y);n<s[i].radius+s[t].radius+10&&(e=!0)}catch(d){throw console.log("ball[i]:"+s[t]),console.log("i:"+t),console.log("ball.length:"+s.length),d+"MYERROR"}e&&t--}};C.onclick=function(){var e=Math.random()*Number(h.max);m(e)};o.oninput=function(){parseInt(o.value)>parseInt(o.max)&&(o.value=o.max),(parseInt(o.value)<parseInt(o.min)||o.value==="")&&(o.value=o.min),o.value=String(Math.floor(Number(o.value)));var e=1e3/Number(o.value);if(x=s.length,Number(o.value)<s.length)for(let i=0;i<x-Number(o.value);i++)s.pop();else{window.globals.numberOfBalls=Number(o.value);for(let i=x;i<window.globals.numberOfBalls;i++)s[i]=new B(0,0,i);for(let i=x;i<s.length;i++){s[i].goToRandomPos(r);var n=!1;for(let d=0;d<s.length;d++)if(i!==d){var t=X(s[d].x,s[d].y,s[i].x,s[i].y);t<s[d].radius+s[i].radius+10&&(n=!0)}n&&i--}}m(s[0].speed),h.max=String(e),Number(h.value)>e&&m(e)};
//# sourceMappingURL=animation1-CYM1rdcA.js.map
