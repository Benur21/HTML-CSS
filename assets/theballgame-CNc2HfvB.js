var B=Object.defineProperty;var D=(t,n,e)=>n in t?B(t,n,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[n]=e;var a=(t,n,e)=>D(t,typeof n!="symbol"?n+"":n,e);import{e as g,g as I,r as w,b as X,d as O,s as R,L as _,t as W}from"./JSTools-KphVFHC3.js";var v=g("dropdownLanguage");I("language")!=null&&I("language")!=""?v.value=I("language"):v.value="pt";const y=g("canvas");if(y==null)throw new Error("Canvas is null.");document.body.onresize=w;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w();g("backToIndex").onclick=X;g("reloadButton").onclick=()=>location.reload(!0);g("downloadGame").onclick=()=>O("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1");v.onchange=()=>R(v.value);var x=g("background");const h=y.getContext("2d");if(h==null)throw new Error("Canvas context is null.");const T=g("toolBar");T&&(T.style.height=window.globals.toolBarHeight+"px");y.style.top=window.globals.toolBarHeight+"px";x.style.width=innerWidth+"px";x.style.height=innerHeight+"px";h.lineJoin="round";new Audio("resources/Click.wav");new Audio("resources/BellRing.wav");w();document.body.onkeydown=function(t){t.which||t.keyCode||t.code};document.body.onkeyup=function(t){t.which||t.keyCode||t.code};var p,f,m;document.body.onmousemove=function(t){p=(t.clientX-Number(y.style.left.replace("px",""))-game.x*window.globals.canvasScale)/window.globals.canvasScale,f=(t.clientY-Number(y.style.top.replace("px",""))-game.y*window.globals.canvasScale)/window.globals.canvasScale};document.body.onmousedown=function(){m=!0};document.body.onmouseup=function(){m=!1};document.body.onresize=A;function A(){w(),x.style.width=innerWidth+"px",x.style.height=innerHeight+"px"}let L,P,H=class extends _{constructor(e,l,r,c,k,Y){super(e,l,r,c);a(this,"hoveringHeightIncrement");a(this,"onclick");a(this,"internal_hovered");a(this,"internal_waitingForRelease");a(this,"internal_mouseEnter");a(this,"internal_mouseLeave");this.outlineWidth=8,this.textHeight=k,this.hoveringHeightIncrement=Y,this.onclick,this.internal_hovered=!1,this.internal_waitingForRelease=!1,this.internal_mouseEnter=!1,this.internal_mouseLeave=!0}onhover(){let e,l,r,c;this.xAlign=="center"?(e=p>this.x-h.measureText(this.text).width/2-this.hoveringHeightIncrement,l=p<this.x+h.measureText(this.text).width/2+this.hoveringHeightIncrement,r=f>this.y-this.textHeight/2-this.hoveringHeightIncrement,c=f<this.y+this.textHeight/2+this.hoveringHeightIncrement):this.xAlign=="start"?(e=p>this.x-this.hoveringHeightIncrement,l=p<this.x+h.measureText(this.text).width+this.hoveringHeightIncrement,r=f>this.y-this.textHeight/2-this.hoveringHeightIncrement,c=f<this.y+this.textHeight/2+this.hoveringHeightIncrement):console.error("Invalid xAlign value on TextButton."),this.internal_hovered=e&&l&&r&&c,this.internal_hovered?(this.internal_mouseEnter||(this.internal_mouseEnter=!0,this.textHeight+=this.hoveringHeightIncrement),this.internal_mouseLeave=!1,this.outlineColor="black"):(this.internal_mouseLeave||(this.internal_mouseLeave=!0,this.textHeight-=this.hoveringHeightIncrement),this.internal_mouseEnter=!1,this.internal_waitingForRelease=!1,this.outlineColor=W)}onClickEvent(){this.internal_hovered&&(m&&(this.internal_waitingForRelease=!0),!m&&this.internal_waitingForRelease&&(this.onclick&&this.onclick(),this.internal_waitingForRelease=!1))}updateLanguage(){this.text="<!ERROR!>"}update(){this.updateContext(),this.onhover(),this.onClickEvent(),this.updateLanguage()}};class S extends _{constructor(e,l,r,c,k){super(e,l,"",c);a(this,"type");a(this,"count");switch(this.type=r,this.count=k,this.type.toLowerCase()){case"lives":this.text=L;break;case"score":this.text=P;break}}}let C=class extends Circle{constructor(e,l){super(e,l,15);a(this,"speedX",0);a(this,"speedY",0);a(this,"color","#0000FF");a(this,"walkSpeed",2);a(this,"jumpSpeed",20);a(this,"side","left");a(this,"touchingLava",!1);a(this,"delaying",!1);a(this,"delayed",0);a(this,"finalDelayTime",0);a(this,"lives");a(this,"score");a(this,"initX");a(this,"initY");a(this,"visible",!0);this.initX=e,this.initY=l,this.lives=new S(10,40,"lives","start",5),this.score=new S(10,80,"score","start",0)}drawText(){this.lives.text=L+" = "+this.lives.count,this.lives.updateContext(),this.lives.draw(),this.score.text=P+" = "+this.score.count,this.score.updateContext(),this.score.draw()}updateX(){this.delaying||(this.speedX*=.7,leftIsDown&&this.x>this.radius&&(this.speedX-=this.walkSpeed),rightIsDown&&this.x<game.width-this.radius&&(this.speedX+=this.walkSpeed),this.x+=this.speedX,this.x<this.radius&&(this.speedX<0&&click.play(),this.speedX=0,this.x=this.radius),this.x>game.width-this.radius&&(this.speedX>0&&click.play(),this.speedX=0,this.x=game.width-this.radius))}updateY(){this.delaying||(this.speedY===1&&this.y>game.height-this.radius-1&&upIsDown&&(this.speedY=-this.jumpSpeed),downIsDown&&(this.speedY+=1),this.y+=this.speedY,this.y>game.height-this.radius&&(this.speedY>10&&click.play(),this.speedY=0,this.y=game.height-this.radius),this.speedY++,this.y<this.radius&&(this.speedY<-10&&click.play(),this.speedY=0,this.y=this.radius))}checkPos(){if(!this.delaying){const e=game.container.lava;this.y>e.y-this.radius&&this.x>e.x-this.radius+5&&this.x<e.x+e.width+5&&(this.speedX=0,this.speedY=0,this.y=e.y-this.radius,this.touchingLava=!0),this.x>e.x-this.radius&&this.y>e.y-this.radius&&this.x<e.x+e.width/2&&(this.speedX=0,this.x=e.x-this.radius,this.touchingLava=!0),this.x>e.x+e.width/2&&this.y>e.y-this.radius&&this.x<e.x+e.width+this.radius&&(this.speedX=0,this.x=e.x+e.width+this.radius,this.touchingLava=!0),(this.touchingLava||this.delayed>0)&&(this.touchingLava=!1,this.delayed===0&&this.delay(100),!this.delaying&&this.delayed===1&&(bellRing.play(),this.delay(650)),!this.delaying&&this.delayed===2&&(this.lives.count--,this.delay(650)),!this.delaying&&this.delayed>=2&&(this.side="left",this.x=100+this.radius,this.y=game.height/2+this.radius,this.speedX=0,this.speedY=5,this.delayed=0,this.lives.count<=0&&(alert(`Perdeste com ${this.score.count} Ponto${this.score.count===1?"":"s"}!!`),this.score.count=0,this.lives.count=5,upIsDown=rightIsDown=leftIsDown=!1))),this.side==="left"&&this.x>game.width/2&&this.y>game.height-this.radius-2&&(this.side="right",this.score.count++),this.side==="right"&&this.x<game.width/2&&this.y>game.height-this.radius-2&&(this.side="left",this.score.count++)}}updatePos(){this.updateX(),this.updateY()}delay(e){this.finalDelayTime=Date.now()+e,this.delaying=!0,this.delayed++}delayStop(){this.delaying&&Date.now()>this.finalDelayTime&&(this.delaying=!1,this.finalDelayTime=0)}restart(){this.x=this.initX,this.y=this.initY,this.walkSpeed=2,this.jumpSpeed=20,this.lives.count=5,this.score.count=0,this.side="left",this.touchingLava=!1,this.delaying=!1,this.delayed=0,this.finalDelayTime=0,this.speedX=0,this.speedY=0,this.visible=!0}};function b(){Rectangle.call(this,canvas.width/2-500,canvas.height/2-300,1e3,600),this.outlinePosition="outer",this.color="#2f538e",this.visible=!1,this.doTranslate=!0,this.container=new Object}b.prototype=Object.create(Rectangle.prototype);b.prototype.constructor=b;b.prototype.draw=function(){if(h.setTransform(1,0,0,1,0,0),this.visible&&(h.lineWidth=this.outlineWidth,h.fillStyle=this.color,h.strokeStyle=this.outlineColor,h.lineWidth=this.outlineWidth,h.fillRect(this.x,this.y,this.width,this.height),this.drawParts_outline(),this.drawParts_patterns()),this.doTranslate&&h.translate(this.x,this.y),this.visible){var t=this.container.getAllProperties(),n=[],e=[];for(i=0;i<t.length;i++)typeof t[i]=="object"&&typeof t[i].showIndex=="number"&&(n.push(i),e.push(t[i]));for(e.sort(function(l,r){return l.showIndex-r.showIndex}),i=0;i<e.length;i++)t[n[i]]=e[i];for(i=0;i<t.length;i++)switch(typeof t[i]){case"object":t[i]instanceof H?(t[i].update(),t[i].draw()):t[i]instanceof _?(t[i].updateLanguage(),t[i].updateContext(),t[i].draw()):t[i]instanceof u?(t[i].draw(),t[i].updatePos()):t[i]instanceof C?(t[i].drawText(),t[i].checkPos(),t[i].draw(),t[i].updatePos(),t[i].delayStop()):t[i].draw();break;case"function":t[i].toString().includes("getAllInstances")||t[i].toString().includes("getAllProperties")||t[i]();break}}};function u(t,n){Rectangle.call(this,canvas.width/2-t/2,-n,t,n),this.doTranslate=!0,this.color="#1062e8",this.outlinePosition="inner",this.showIndex=100,this.maxYMoveSpeed=40,this.showing=!1,this.hiding=!1,this.container=new Object}u.prototype=Object.create(Rectangle.prototype);u.prototype.constructor=u;u.prototype.draw=function(){if(h.setTransform(1,0,0,1,0,0),this.visible&&(h.lineWidth=this.outlineWidth,h.fillStyle=this.color,h.strokeStyle=this.outlineColor,h.lineWidth=this.outlineWidth,h.fillRect(this.x,this.y,this.width,this.height),this.drawParts_outline(),this.drawParts_patterns()),this.doTranslate&&h.translate(this.x,this.y),this.visible){var t=this.container.getAllProperties(),n=[],e=[];for(j=0;j<t.length;j++)typeof t[j]=="object"&&typeof t[j].showIndex=="number"&&(n.push(j),e.push(t[j]));for(e.sort(function(l,r){return r.showIndex-l.showIndex}),j=0;j<e.length;j++)t[n[j]]=e[j];for(j=0;j<t.length;j++)switch(typeof t[j]){case"object":t[j]instanceof H?(t[j].update(),t[j].draw()):t[j]instanceof _?(t[j].updateLanguage(),t[i].updateContext(),t[j].draw()):t[j]instanceof C?(t[j].drawText(),t[j].checkPos(),t[j].draw(),t[j].updatePos(),t[j].delayStop()):t[j].draw();break;case"function":t[j].toString().includes("getAllInstances")||t[j].toString().includes("getAllProperties")||t[j]();break}}h.setTransform(1,0,0,1,0,0),h.translate(game.x,game.y)};u.prototype.updatePos=function(){var t=distance(0,this.y,0,canvas.height/2-this.height/2)/distance(0,-this.height,0,canvas.height/2-this.height/2),n=distance(0,this.y,0,canvas.height)/distance(0,canvas.height/2-this.height/2,0,canvas.height);this.showing&&(this.y+=this.maxYMoveSpeed*t,Math.round(this.y)==Math.round(canvas.height/2-this.height/2)&&(this.showing=!1)),this.hiding&&(this.y+=this.maxYMoveSpeed*(1-n)+1,this.y>canvas.height&&(this.hiding=!1))};u.prototype.show=function(){this.visible=!0,this.x=canvas.width/2-this.width/2,this.y=-this.height,this.showing=!0,this.hiding=!1};u.prototype.hide=function(){this.visible=!0,this.x=canvas.width/2-this.width/2,this.y=canvas.height/2-this.height/2,this.showing=!1,this.hiding=!0};var s=new GameState,o=new GameState,d=new GameState;o.visible=!0;s.container.player=new Ball(115,s.height/2+15);s.container.lava=new Rectangle(s.width/2-50,s.height-130,100,130);s.container.lava.doPattern="diagonals";s.container.lava.color="orange";s.container.lava.outlineColor="red";s.container.lava.outlineWidth=2;s.container.lava.outlinePosition="inner";s.container.backToMenu_opt=new TextButton(s.width/2,50,backToMenu_lang,"center",40,5);s.container.backToMenu_opt.updateLanguage=function(){this.text=backToMenu_lang};o.container.playGame_opt=new TextButton(s.width/2,130,playGameOption_lang,"center",50,5);o.container.playGame_opt.updateLanguage=function(){this.text=playGameOption_lang};o.container.options_opt=new TextButton(s.width/2,220,optionsOption_lang,"center",50,5);o.container.options_opt.updateLanguage=function(){this.text=optionsOption_lang};o.container.download_opt=new TextButton(s.width/2,310,downloadOption_lang,"center",50,5);o.container.download_opt.updateLanguage=function(){this.text=downloadOption_lang};d.container.exitOptions_opt=new TextButton(30,30,exitOptionsButton_lang,"start",30,5);d.container.exitOptions_opt.updateLanguage=function(){this.text=exitOptionsButton_lang};d.container.optionsSoon=new Label(s.width/2,s.height/2-15,optionsSoon_lang,"center");d.container.optionsSoon.textHeight=100;d.container.optionsSoon.updateLanguage=function(){this.text=optionsSoon_lang};s.container.backToMenu_opt.onclick=function(){s.visible=!1,o.visible=!0,d.visible=!1},o.container.playGame_opt.onclick=function(){s.visible=!0,o.visible=!1,d.visible=!1,s.container.player.restart()},o.container.options_opt.onclick=function(){s.visible=!1,o.visible=!1,d.visible=!0},o.container.download_opt.onclick=function(){download("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1")},d.container.exitOptions_opt.onclick=function(){s.visible=!1,o.visible=!0,d.visible=!1};AnimationLOOP(function(){s.draw(),o.draw(),d.draw(),M()});function M(){document.hasFocus()||(rightIsDown=!1,leftIsDown=!1,upIsDown=!1),new Date().getTime()}
//# sourceMappingURL=theballgame-CNc2HfvB.js.map
