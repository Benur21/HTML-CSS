var W=Object.defineProperty;var j=(s,g,i)=>g in s?W(s,g,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[g]=i;var a=(s,g,i)=>j(s,typeof g!="symbol"?g+"":g,i);import{r as B,e as u,g as m,b as E,d as X,R as P,L as x,t as F,f as y,h as J,A as z}from"./JSTools-DrLyDRdD.js";var l,L=!1,S=!1,H=!1,D=!1;document.body.onkeydown=function(s){l=s.which||s.keyCode||s.code,(l===38||l===87)&&(L=!0),(l===37||l===65)&&(S=!0),(l===39||l===68)&&(H=!0),(l===40||l===83)&&(D=!0)};document.body.onkeyup=function(s){l=s.which||s.keyCode||s.code,(l===38||l===87)&&(L=!1),(l===37||l===65)&&(S=!1),(l===39||l===68)&&(H=!1),(l===40||l===83)&&(D=!1)};var f,v,_;document.body.onmousemove=function(s){f=(s.clientX-Number(h.style.left.replace("px",""))-t.x*window.globals.canvasScale)/window.globals.canvasScale,v=(s.clientY-Number(h.style.top.replace("px",""))-t.y*window.globals.canvasScale)/window.globals.canvasScale};document.body.onmousedown=function(){_=!0};document.body.onmouseup=function(){_=!1};document.body.onresize=k;function k(){B(),I.style.width=innerWidth+"px",I.style.height=innerHeight+"px"}function R(s){typeof s.upIsDown=="boolean"&&(L=s.upIsDown),typeof s.leftIsDown=="boolean"&&(S=s.leftIsDown),typeof s.rightIsDown=="boolean"&&(H=s.rightIsDown),typeof s.downIsDown=="boolean"&&(D=s.downIsDown)}var T=u("dropdownLanguage");m("language")!=null&&m("language")!=""?T.value=m("language"):T.value="pt";const h=u("canvas");if(h==null)throw new Error("Canvas is null.");const I=u("background");document.body.onresize=k;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",k):k();A(m("language"));u("backToIndex").onclick=E;u("reloadButton").onclick=()=>location.reload(!0);u("downloadGame").onclick=()=>X("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1");T.onchange=()=>A(T.value);const n=h.getContext("2d");if(n==null)throw new Error("Canvas context is null.");const C=u("toolBar");C&&(C.style.height=window.globals.toolBarHeight+"px");h.style.top=window.globals.toolBarHeight+"px";I.style.width=innerWidth+"px";I.style.height=innerHeight+"px";n.lineJoin="round";var b=new Audio("resources/Click.wav"),V=new Audio("resources/BellRing.wav");B();function A(s){switch(s){case"en":document.cookie="language="+s+"; expires=Thu, 01 Jan 2040 00:00:00 UTC; path=/;",document.title="The Ball Game",h.innerHTML="Your browser doesn't support the HTML5 canvas tag.",u("backToIndex").innerHTML="Back",u("reloadButton").innerHTML="Reload",u("downloadGame").innerHTML="Download Game (Portuguese only)",window.globals.livesText_lang="Lives",window.globals.scoreText_lang="Score",window.globals.playGameOption_lang="Play",window.globals.optionsOption_lang="Options",window.globals.downloadOption_lang="Download",window.globals.optionsSoon_lang="Soon",window.globals.backToMenu_lang="Exit",window.globals.exitOptionsButton_lang="Back to Main Menu";break;default:localStorage.removeItem("language"),document.cookie="language=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.title="Jogo da Bolinha",h.innerHTML="O teu browser não suporta a tag canvas do HTML5.",u("backToIndex").innerHTML="Voltar",u("reloadButton").innerHTML="Recarregar",u("downloadGame").innerHTML="Descarregar Jogo",window.globals.livesText_lang="Vidas",window.globals.scoreText_lang="Pontuação",window.globals.playGameOption_lang="Jogar",window.globals.optionsOption_lang="Opções",window.globals.downloadOption_lang="Descarregar",window.globals.optionsSoon_lang="Brevemente",window.globals.backToMenu_lang="Sair",window.globals.exitOptionsButton_lang="Voltar para o Menu Principal";break}}class p extends x{constructor(i,o,r,e,c,G){super(i,o,r,e);a(this,"hoveringHeightIncrement");a(this,"onclick");a(this,"internal_hovered");a(this,"internal_waitingForRelease");a(this,"internal_mouseEnter");a(this,"internal_mouseLeave");this.outlineWidth=8,this.textHeight=c,this.hoveringHeightIncrement=G,this.onclick,this.internal_hovered=!1,this.internal_waitingForRelease=!1,this.internal_mouseEnter=!1,this.internal_mouseLeave=!0}onhover(){let i,o,r,e;this.xAlign=="center"?(i=f>this.x-n.measureText(this.text).width/2-this.hoveringHeightIncrement,o=f<this.x+n.measureText(this.text).width/2+this.hoveringHeightIncrement,r=v>this.y-this.textHeight/2-this.hoveringHeightIncrement,e=v<this.y+this.textHeight/2+this.hoveringHeightIncrement):this.xAlign=="start"?(i=f>this.x-this.hoveringHeightIncrement,o=f<this.x+n.measureText(this.text).width+this.hoveringHeightIncrement,r=v>this.y-this.textHeight/2-this.hoveringHeightIncrement,e=v<this.y+this.textHeight/2+this.hoveringHeightIncrement):console.error("Invalid xAlign value on TextButton."),this.internal_hovered=i&&o&&r&&e,this.internal_hovered?(this.internal_mouseEnter||(this.internal_mouseEnter=!0,this.textHeight+=this.hoveringHeightIncrement),this.internal_mouseLeave=!1,this.outlineColor="black"):(this.internal_mouseLeave||(this.internal_mouseLeave=!0,this.textHeight-=this.hoveringHeightIncrement),this.internal_mouseEnter=!1,this.internal_waitingForRelease=!1,this.outlineColor=F)}onClickEvent(){this.internal_hovered&&(_&&(this.internal_waitingForRelease=!0),!_&&this.internal_waitingForRelease&&(this.onclick&&this.onclick(),this.internal_waitingForRelease=!1))}updateLanguage(){this.text="<!ERROR!>"}update(){this.updateContext(),this.onhover(),this.onClickEvent(),this.updateLanguage()}}class Y extends x{constructor(i,o,r,e,c){super(i,o,"",e);a(this,"type");a(this,"count");switch(this.type=r,this.count=c,this.type.toLowerCase()){case"lives":this.text=window.globals.livesText_lang;break;case"score":this.text=window.globals.scoreText_lang;break}}}class M extends J{constructor(i,o){super(i,o,15);a(this,"speedX",0);a(this,"speedY",0);a(this,"color","#0000FF");a(this,"walkSpeed",2);a(this,"jumpSpeed",20);a(this,"side","left");a(this,"touchingLava",!1);a(this,"delaying",!1);a(this,"delayed",0);a(this,"finalDelayTime",0);a(this,"lives");a(this,"score");a(this,"initX");a(this,"initY");a(this,"visible",!0);this.initX=i,this.initY=o,this.lives=new Y(10,40,"lives","start",5),this.score=new Y(10,80,"score","start",0)}drawText(){this.lives.text=window.globals.livesText_lang+" = "+this.lives.count,this.lives.updateContext(),this.lives.draw(),this.score.text=window.globals.scoreText_lang+" = "+this.score.count,this.score.updateContext(),this.score.draw()}updateX(){this.delaying||(this.speedX*=.7,S&&this.x>this.radius&&(this.speedX-=this.walkSpeed),H&&this.x<t.width-this.radius&&(this.speedX+=this.walkSpeed),this.x+=this.speedX,this.x<this.radius&&(this.speedX<0&&b.play(),this.speedX=0,this.x=this.radius),this.x>t.width-this.radius&&(this.speedX>0&&b.play(),this.speedX=0,this.x=t.width-this.radius))}updateY(){this.delaying||(this.speedY===1&&this.y>t.height-this.radius-1&&L&&(this.speedY=-this.jumpSpeed),D&&(this.speedY+=1),this.y+=this.speedY,this.y>t.height-this.radius&&(this.speedY>10&&b.play(),this.speedY=0,this.y=t.height-this.radius),this.speedY++,this.y<this.radius&&(this.speedY<-10&&b.play(),this.speedY=0,this.y=this.radius))}checkPos(){if(!this.delaying){const i=t.container.lava;this.y>i.y-this.radius&&this.x>i.x-this.radius+5&&this.x<i.x+i.width+5&&(this.speedX=0,this.speedY=0,this.y=i.y-this.radius,this.touchingLava=!0),this.x>i.x-this.radius&&this.y>i.y-this.radius&&this.x<i.x+i.width/2&&(this.speedX=0,this.x=i.x-this.radius,this.touchingLava=!0),this.x>i.x+i.width/2&&this.y>i.y-this.radius&&this.x<i.x+i.width+this.radius&&(this.speedX=0,this.x=i.x+i.width+this.radius,this.touchingLava=!0),(this.touchingLava||this.delayed>0)&&(this.touchingLava=!1,this.delayed===0&&this.delay(100),!this.delaying&&this.delayed===1&&(V.play(),this.delay(650)),!this.delaying&&this.delayed===2&&(this.lives.count--,this.delay(650)),!this.delaying&&this.delayed>=2&&(this.side="left",this.x=100+this.radius,this.y=t.height/2+this.radius,this.speedX=0,this.speedY=5,this.delayed=0,this.lives.count<=0&&(alert(`Perdeste com ${this.score.count} Ponto${this.score.count===1?"":"s"}!!`),this.score.count=0,this.lives.count=5,R({upIsDown:!1,rightIsDown:!1,leftIsDown:!1})))),this.side==="left"&&this.x>t.width/2&&this.y>t.height-this.radius-2&&(this.side="right",this.score.count++),this.side==="right"&&this.x<t.width/2&&this.y>t.height-this.radius-2&&(this.side="left",this.score.count++)}}updatePos(){this.updateX(),this.updateY()}delay(i){this.finalDelayTime=Date.now()+i,this.delaying=!0,this.delayed++}delayStop(){this.delaying&&Date.now()>this.finalDelayTime&&(this.delaying=!1,this.finalDelayTime=0)}restart(){this.x=this.initX,this.y=this.initY,this.walkSpeed=2,this.jumpSpeed=20,this.lives.count=5,this.score.count=0,this.side="left",this.touchingLava=!1,this.delaying=!1,this.delayed=0,this.finalDelayTime=0,this.speedX=0,this.speedY=0,this.visible=!0}}class O extends P{constructor(){super(h.width/2-500,h.height/2-300,1e3,600);a(this,"container");this.outlinePosition="outer",this.color="#2f538e",this.visible=!1,this.doTranslate=!0,this.container=new Object}draw(){if(n.setTransform(1,0,0,1,0,0),this.visible&&(n.lineWidth=this.outlineWidth,n.fillStyle=this.color,n.strokeStyle=this.outlineColor,n.lineWidth=this.outlineWidth,n.fillRect(this.x,this.y,this.width,this.height),this.drawParts_outline(),this.drawParts_patterns()),this.doTranslate&&n.translate(this.x,this.y),this.visible){var i=this.container.getAllProperties(),o=[],r=[];for(let e=0;e<i.length;e++)typeof i[e]=="object"&&typeof i[e].showIndex=="number"&&(o.push(e),r.push(i[e]));r.sort(function(e,c){return e.showIndex-c.showIndex});for(let e=0;e<r.length;e++)i[o[e]]=r[e];for(let e=0;e<i.length;e++)switch(typeof i[e]){case"object":i[e]instanceof p?(i[e].update(),i[e].draw()):i[e]instanceof x?(i[e].updateLanguage(),i[e].updateContext(),i[e].draw()):i[e]instanceof q?(i[e].draw(),i[e].updatePos()):i[e]instanceof M?(i[e].drawText(),i[e].checkPos(),i[e].draw(),i[e].updatePos(),i[e].delayStop()):i[e].draw();break;case"function":i[e].toString().includes("getAllInstances")||i[e].toString().includes("getAllProperties")||i[e]();break}}}}class q extends P{constructor(i,o){super(h.width/2-i/2,-o,i,o);a(this,"maxYMoveSpeed");a(this,"showing");a(this,"hiding");a(this,"container");this.doTranslate=!0,this.color="#1062e8",this.outlinePosition="inner",this.showIndex=100,this.maxYMoveSpeed=40,this.showing=!1,this.hiding=!1,this.container=new Object}draw(){if(n.setTransform(1,0,0,1,0,0),this.visible&&(n.lineWidth=this.outlineWidth,n.fillStyle=this.color,n.strokeStyle=this.outlineColor,n.lineWidth=this.outlineWidth,n.fillRect(this.x,this.y,this.width,this.height),this.drawParts_outline(),this.drawParts_patterns()),this.doTranslate&&n.translate(this.x,this.y),this.visible){var i=this.container.getAllProperties(),o=[],r=[];for(let e=0;e<i.length;e++)typeof i[e]=="object"&&typeof i[e].showIndex=="number"&&(o.push(e),r.push(i[e]));r.sort(function(e,c){return c.showIndex-e.showIndex});for(let e=0;e<r.length;e++)i[o[e]]=r[e];for(let e=0;e<i.length;e++)switch(typeof i[e]){case"object":i[e]instanceof p?(i[e].update(),i[e].draw()):i[e]instanceof x?(i[e].updateLanguage(),i[e].updateContext(),i[e].draw()):i[e]instanceof M?(i[e].drawText(),i[e].checkPos(),i[e].draw(),i[e].updatePos(),i[e].delayStop()):i[e].draw();break;case"function":i[e].toString().includes("getAllInstances")||i[e].toString().includes("getAllProperties")||i[e]();break}}n.setTransform(1,0,0,1,0,0),n.translate(t.x,t.y)}updatePos(){var i=y(0,this.y,0,h.height/2-this.height/2)/y(0,-this.height,0,h.height/2-this.height/2),o=y(0,this.y,0,h.height)/y(0,h.height/2-this.height/2,0,h.height);this.showing&&(this.y+=this.maxYMoveSpeed*i,Math.round(this.y)==Math.round(h.height/2-this.height/2)&&(this.showing=!1)),this.hiding&&(this.y+=this.maxYMoveSpeed*(1-o)+1,this.y>h.height&&(this.hiding=!1))}show(){this.visible=!0,this.x=h.width/2-this.width/2,this.y=-this.height,this.showing=!0,this.hiding=!1}hide(){this.visible=!0,this.x=h.width/2-this.width/2,this.y=h.height/2-this.height/2,this.showing=!1,this.hiding=!0}}var t=new O,d=new O,w=new O;d.visible=!0;t.container.player=new M(115,t.height/2+15);t.container.lava=new P(t.width/2-50,t.height-130,100,130);t.container.lava.doPattern="diagonals";t.container.lava.color="orange";t.container.lava.outlineColor="red";t.container.lava.outlineWidth=2;t.container.lava.outlinePosition="inner";t.container.backToMenu_opt=new p(t.width/2,50,window.globals.backToMenu_lang,"center",40,5);t.container.backToMenu_opt.updateLanguage=function(){this.text=window.globals.backToMenu_lang};d.container.playGame_opt=new p(t.width/2,130,window.globals.playGameOption_lang,"center",50,5);d.container.playGame_opt.updateLanguage=function(){this.text=window.globals.playGameOption_lang};d.container.options_opt=new p(t.width/2,220,window.globals.optionsOption_lang,"center",50,5);d.container.options_opt.updateLanguage=function(){this.text=window.globals.optionsOption_lang};d.container.download_opt=new p(t.width/2,310,window.globals.downloadOption_lang,"center",50,5);d.container.download_opt.updateLanguage=function(){this.text=window.globals.downloadOption_lang};w.container.exitOptions_opt=new p(30,30,window.globals.exitOptionsButton_lang,"start",30,5);w.container.exitOptions_opt.updateLanguage=function(){this.text=window.globals.exitOptionsButton_lang};w.container.optionsSoon=new x(t.width/2,t.height/2-15,window.globals.optionsSoon_lang,"center");w.container.optionsSoon.textHeight=100;w.container.optionsSoon.updateLanguage=function(){this.text=window.globals.optionsSoon_lang};t.container.backToMenu_opt.onclick=function(){t.visible=!1,d.visible=!0,w.visible=!1},d.container.playGame_opt.onclick=function(){t.visible=!0,d.visible=!1,w.visible=!1,t.container.player.restart()},d.container.options_opt.onclick=function(){t.visible=!1,d.visible=!1,w.visible=!0},d.container.download_opt.onclick=function(){X("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1")},w.container.exitOptions_opt.onclick=function(){t.visible=!1,d.visible=!0,w.visible=!1};z(function(){t.draw(),d.draw(),w.draw(),K()});function K(){document.hasFocus()||R({upIsDown:!1,leftIsDown:!1,rightIsDown:!1}),new Date().getTime()}
//# sourceMappingURL=theballgame-WHuG-ZFB.js.map
