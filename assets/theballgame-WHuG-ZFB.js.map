{"version":3,"file":"theballgame-WHuG-ZFB.js","sources":["../../src/TheBallGame/Events.ts","../../src/TheBallGame/Initialization.ts","../../src/languages/TheBallGame.ts","../../src/TheBallGame/Classes.ts","../../src/TheBallGame/Main.ts"],"sourcesContent":["import { resizeCanvas } from \"../JSTools\";\nimport { background, canvas } from \"./Initialization\";\nimport { game } from \"./Main\";\n\nvar lastKey;\nvar upIsDown = false;\nvar leftIsDown = false;\nvar rightIsDown = false;\nvar downIsDown = false;\ndocument.body.onkeydown = function (event) {\n  lastKey = event.which || event.keyCode || event.code;\n  if (lastKey === 38 || lastKey === 87) {\n    upIsDown = true;\n  }\n  if (lastKey === 37 || lastKey === 65) {\n    leftIsDown = true;\n  }\n  if (lastKey === 39 || lastKey === 68) {\n    rightIsDown = true;\n  }\n  if (lastKey === 40 || lastKey === 83) {\n    downIsDown = true;\n  }\n};\ndocument.body.onkeyup = function (event) {\n  lastKey = event.which || event.keyCode || event.code;\n  if (lastKey === 38 || lastKey === 87) {\n    upIsDown = false;\n  }\n  if (lastKey === 37 || lastKey === 65) {\n    leftIsDown = false;\n  }\n  if (lastKey === 39 || lastKey === 68) {\n    rightIsDown = false;\n  }\n  if (lastKey === 40 || lastKey === 83) {\n    downIsDown = false;\n  }\n};\nvar mouseX: number, mouseY: number, mouseIsDown: boolean;\ndocument.body.onmousemove = function (event) {\n  mouseX =\n    (event.clientX -\n      Number(canvas.style.left.replace('px', '')) -\n      game.x * (window as any).globals.canvasScale) /\n    (window as any).globals.canvasScale;\n  mouseY =\n    (event.clientY -\n      Number(canvas.style.top.replace('px', '')) -\n      game.y * (window as any).globals.canvasScale) /\n    (window as any).globals.canvasScale;\n};\ndocument.body.onmousedown = function () {\n  mouseIsDown = true;\n};\ndocument.body.onmouseup = function () {\n  mouseIsDown = false;\n};\ndocument.body.onresize = onresize;\nfunction onresize() {\n  resizeCanvas();\n  background.style.width = innerWidth + \"px\";\n  background.style.height = innerHeight + \"px\";\n}\n\nfunction setKeyStates(states: {\n  upIsDown?: boolean;\n  leftIsDown?: boolean;\n  rightIsDown?: boolean;\n  downIsDown?: boolean;\n}) {\n  if (typeof states.upIsDown === \"boolean\") upIsDown = states.upIsDown;\n  if (typeof states.leftIsDown === \"boolean\") leftIsDown = states.leftIsDown;\n  if (typeof states.rightIsDown === \"boolean\") rightIsDown = states.rightIsDown;\n  if (typeof states.downIsDown === \"boolean\") downIsDown = states.downIsDown;\n}\n\nexport {\n  mouseX,\n  mouseY,\n  mouseIsDown,\n  lastKey,\n  upIsDown,\n  leftIsDown,\n  rightIsDown,\n  downIsDown,\n  setKeyStates,\n  onresize,\n};\n","import { element, resizeCanvas, getCookie, backToIndex, download } from \"../JSTools\";\nimport { setLanguage } from \"../languages/TheBallGame\";\nimport '../globals';\nimport { onresize } from \"./Events\";\n\n// <select> \"ONLOAD\"=\nvar dropdownLanguage = element('dropdownLanguage') as HTMLSelectElement;\nif (getCookie('language') != undefined && getCookie('language') != '') {\n  dropdownLanguage.value = getCookie('language');\n} else {\n  dropdownLanguage.value = 'pt';\n}\n\nconst canvas = element(\"canvas\") as HTMLCanvasElement;\nif (canvas == null) {\n  throw new Error(\"Canvas is null.\");\n}\n\n//Creating variables for the elements...\nconst background = element(\"background\")!;\n\ndocument.body.onresize = onresize;\nif (document.readyState === \"loading\") {\n  // Loading hasn't finished yet\n  document.addEventListener(\"DOMContentLoaded\", onresize);\n} else {\n  // `DOMContentLoaded` has already fired\n  onresize();\n}\n\nsetLanguage(getCookie(\"language\") as \"pt\" | \"en\");\n\n//toolBar\nelement(\"backToIndex\")!.onclick = backToIndex;\nelement('reloadButton')!.onclick = () =>\n  (location.reload as (forceGet: boolean) => void)(true);\nelement('downloadGame')!.onclick = () =>\n  download('https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1');\ndropdownLanguage.onchange = () => setLanguage(dropdownLanguage.value as \"pt\" | \"en\");\n\n\n//Setting values...\nconst ctx = canvas.getContext(\"2d\") as CanvasRenderingContext2D;\nif (ctx == null) {\n  throw new Error(\"Canvas context is null.\");\n}\nconst toolBar = element(\"toolBar\");\nif (toolBar) toolBar.style.height = (window as any).globals.toolBarHeight + \"px\";\ncanvas.style.top = (window as any).globals.toolBarHeight + \"px\";\nbackground.style.width = innerWidth + \"px\";\nbackground.style.height = innerHeight + \"px\";\nctx.lineJoin = \"round\";\n//Loading Audio...\nvar click = new Audio(\"resources/Click.wav\");\nvar bellRing = new Audio(\"resources/BellRing.wav\");\n//Resizing Canvas...\nresizeCanvas();\n\nexport { canvas, ctx as c, click, bellRing, background };","import { element } from \"../JSTools\";\nimport { canvas } from \"../TheBallGame/Initialization\";\n\nfunction setLanguage(language: \"en\" | \"pt\") {\n  switch (language) {\n  case \"en\":\n    document.cookie = \"language=\" + language + \"; expires=Thu, 01 Jan 2040 00:00:00 UTC; path=/;\";\n    document.title = \"The Ball Game\";\n    canvas.innerHTML = \"Your browser doesn't support the HTML5 canvas tag.\";\n    element(\"backToIndex\")!.innerHTML = \"Back\";\n    element(\"reloadButton\")!.innerHTML = \"Reload\";\n    element(\"downloadGame\")!.innerHTML = \"Download Game (Portuguese only)\";\n    (window as any).globals.livesText_lang = \"Lives\";\n    (window as any).globals.scoreText_lang = \"Score\";\n    (window as any).globals.playGameOption_lang = \"Play\";\n    (window as any).globals.optionsOption_lang = \"Options\";\n    (window as any).globals.downloadOption_lang = \"Download\";\n    (window as any).globals.optionsSoon_lang = \"Soon\";\n    (window as any).globals.backToMenu_lang = \"Exit\";\n    (window as any).globals.exitOptionsButton_lang = \"Back to Main Menu\";\n    break;\n  default:\n    localStorage.removeItem(\"language\");\n    document.cookie = \"language=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;\";\n    document.title = \"Jogo da Bolinha\";\n    canvas.innerHTML = \"O teu browser não suporta a tag canvas do HTML5.\";\n    element(\"backToIndex\")!.innerHTML = \"Voltar\";\n    element(\"reloadButton\")!.innerHTML = \"Recarregar\";\n    element(\"downloadGame\")!.innerHTML = \"Descarregar Jogo\";\n    (window as any).globals.livesText_lang = \"Vidas\";\n    (window as any).globals.scoreText_lang = \"Pontuação\";\n    (window as any).globals.playGameOption_lang = \"Jogar\";\n    (window as any).globals.optionsOption_lang = \"Opções\";\n    (window as any).globals.downloadOption_lang = \"Descarregar\";\n    (window as any).globals.optionsSoon_lang = \"Brevemente\";\n    (window as any).globals.backToMenu_lang = \"Sair\";\n    (window as any).globals.exitOptionsButton_lang = \"Voltar para o Menu Principal\";\n    break;\n  }\n}\n\nexport { setLanguage };","import { Circle, distance, Label, Rectangle, transparent } from \"../JSTools\";\nimport { downIsDown, leftIsDown, mouseIsDown, mouseX, mouseY, rightIsDown, setKeyStates, upIsDown } from \"./Events\";\nimport { bellRing, c, canvas, click } from \"./Initialization\";\nimport { game } from \"./Main\";\n\nclass TextButton extends Label {\n  hoveringHeightIncrement: number;\n  onclick: undefined | (() => void);\n  \n  internal_hovered: boolean;\n  internal_waitingForRelease: boolean;\n  internal_mouseEnter: boolean;\n  internal_mouseLeave: boolean;\n  constructor(x: number, y: number, text: string, xAlign: \"start\" | \"center\", textHeight: number, hoveringHeightIncrement: number) {\n    super(x, y, text, xAlign);\n    this.outlineWidth = 8;\n    this.textHeight = textHeight;\n    this.hoveringHeightIncrement = hoveringHeightIncrement;\n    this.onclick; //Função que define aquilo que vai acontecer ao clicar no botão. Será definida mais tarde, com um objeto mais específico.\n    //Variáveis internas que não deverão ser alteradas, pois não têm a ver com personalização:\n    this.internal_hovered = false; //Esta variável diz se o cursor em cima do botão.\n    this.internal_waitingForRelease = false;\n    this.internal_mouseEnter = false; //Esta só serve para o tamanho apenas aumentar uma vez quando o rato entrar no objeto.\n    this.internal_mouseLeave = true; //Para o tamanho apenas diminuir uma vez quando o rato sair do objeto.\n  }\n  \n  onhover() { /*collapseit*/\n    let hovering1, hovering2, hovering3, hovering4;\n    if (this.xAlign == \"center\") { //Para sincronizar o hovering com os align, e para verificar se há hovering.\n      hovering1 = mouseX > this.x - c.measureText(this.text).width / 2 - this.hoveringHeightIncrement;\n      hovering2 = mouseX < this.x + c.measureText(this.text).width / 2 + this.hoveringHeightIncrement;\n      hovering3 = mouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n      hovering4 = mouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n    } else if (this.xAlign == \"start\") {\n      hovering1 = mouseX > this.x - this.hoveringHeightIncrement;\n      hovering2 = mouseX < this.x + c.measureText(this.text).width + this.hoveringHeightIncrement;\n      hovering3 = mouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n      hovering4 = mouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n    } else {\n      console.error(\"Invalid xAlign value on TextButton.\");\n    }\n    this.internal_hovered = hovering1! && hovering2! && hovering3! && hovering4!;\n    if (this.internal_hovered) {\n      if (!this.internal_mouseEnter) {\n        this.internal_mouseEnter = true;\n        this.textHeight += this.hoveringHeightIncrement;\n      }\n      this.internal_mouseLeave = false;\n      this.outlineColor = \"black\";\n    } else {\n      if (!this.internal_mouseLeave) {\n        this.internal_mouseLeave = true;\n        this.textHeight -= this.hoveringHeightIncrement;\n      }\n      this.internal_mouseEnter = false;\n      this.internal_waitingForRelease = false;\n      this.outlineColor = transparent;\n    }\n  };\n  \n  onClickEvent () { /*collapseit*/\n    if (this.internal_hovered) {\n      if (mouseIsDown) { //Se isto for verdade, ou seja está-se clicando em cima do botão, só falta largar para a...\n        this.internal_waitingForRelease = true; //...condição seguinte ser executada.\n      }\n      if (!mouseIsDown && this.internal_waitingForRelease) { //É isto que fica à espera de Release.\n        this.onclick && this.onclick();\n        this.internal_waitingForRelease = false;\n      }\n    }\n  };\n  \n  updateLanguage (){ /*collapseit*/\n    this.text = \"<!ERROR!>\";\n  };\n  \n  update () { /*collapseit*/\n    this.updateContext();\n    this.onhover();\n    this.onClickEvent();\n    this.updateLanguage();\n  };\n}\n\nclass PlayerInfo extends Label {/*collapseit*/\n  type: \"lives\" | \"score\";\n  count: number;\n  constructor(x: number, y: number, type: \"lives\" | \"score\", xAlign: \"start\" | \"center\", startCount: number) {\n    super(x, y, \"\", xAlign);\n    this.type = type;\n    this.count = startCount;\n    switch (this.type.toLowerCase()) {\n    case \"lives\":\n      this.text = (window as any).globals.livesText_lang;\n      break;\n    case \"score\":\n      this.text = (window as any).globals.scoreText_lang;\n      break;\n    }\n  }\n}\n\nclass Ball extends Circle {\n  speedX = 0;\n  speedY = 0;\n  color = \"#0000FF\";\n  walkSpeed = 2;\n  jumpSpeed = 20;\n  side: \"left\" | \"right\" = \"left\";\n  touchingLava = false;\n  delaying = false;\n  delayed = 0;\n  finalDelayTime = 0;\n  lives: PlayerInfo;\n  score: PlayerInfo;\n  initX: number;\n  initY: number;\n  visible = true;\n\n  constructor(x: number, y: number) {\n    super(x, y, 15);\n    this.initX = x;\n    this.initY = y;\n    this.lives = new PlayerInfo(10, 40, \"lives\", \"start\", 5);\n    this.score = new PlayerInfo(10, 80, \"score\", \"start\", 0);\n  }\n\n  drawText() {\n    this.lives.text = (window as any).globals.livesText_lang + \" = \" + this.lives.count;\n    this.lives.updateContext();\n    this.lives.draw();\n    this.score.text = (window as any).globals.scoreText_lang + \" = \" + this.score.count;\n    this.score.updateContext();\n    this.score.draw();\n  }\n\n  updateX() {\n    if (!this.delaying) {\n      this.speedX *= 0.7;\n      if (leftIsDown && this.x > this.radius) this.speedX -= this.walkSpeed;\n      if (rightIsDown && this.x < game.width - this.radius) this.speedX += this.walkSpeed;\n      this.x += this.speedX;\n\n      if (this.x < this.radius) {\n        if (this.speedX < 0) click.play();\n        this.speedX = 0;\n        this.x = this.radius;\n      }\n      if (this.x > game.width - this.radius) {\n        if (this.speedX > 0) click.play();\n        this.speedX = 0;\n        this.x = game.width - this.radius;\n      }\n    }\n  }\n\n  updateY() {\n    if (!this.delaying) {\n      if (this.speedY === 1 && this.y > game.height - this.radius - 1 && upIsDown) {\n        this.speedY = -this.jumpSpeed;\n      }\n      if (downIsDown) this.speedY += 1;\n      this.y += this.speedY;\n\n      if (this.y > game.height - this.radius) {\n        if (this.speedY > 10) click.play();\n        this.speedY = 0;\n        this.y = game.height - this.radius;\n      }\n      this.speedY++;\n\n      if (this.y < this.radius) {\n        if (this.speedY < -10) click.play();\n        this.speedY = 0;\n        this.y = this.radius;\n      }\n    }\n  }\n\n  checkPos() {\n    if (!this.delaying) {\n      const lava = game.container.lava;\n\n      if (this.y > lava.y - this.radius && this.x > lava.x - this.radius + 5 && this.x < lava.x + lava.width + 5) {\n        this.speedX = 0;\n        this.speedY = 0;\n        this.y = lava.y - this.radius;\n        this.touchingLava = true;\n      }\n      if (this.x > lava.x - this.radius && this.y > lava.y - this.radius && this.x < lava.x + lava.width / 2) {\n        this.speedX = 0;\n        this.x = lava.x - this.radius;\n        this.touchingLava = true;\n      }\n      if (this.x > lava.x + lava.width / 2 && this.y > lava.y - this.radius && this.x < lava.x + lava.width + this.radius) {\n        this.speedX = 0;\n        this.x = lava.x + lava.width + this.radius;\n        this.touchingLava = true;\n      }\n\n      if (this.touchingLava || this.delayed > 0) {\n        this.touchingLava = false;\n\n        if (this.delayed === 0) this.delay(100);\n        if (!this.delaying && this.delayed === 1) {\n          bellRing.play();\n          this.delay(650);\n        }\n        if (!this.delaying && this.delayed === 2) {\n          this.lives.count--;\n          this.delay(650);\n        }\n        if (!this.delaying && this.delayed >= 2) {\n          this.side = \"left\";\n          this.x = 100 + this.radius;\n          this.y = game.height / 2 + this.radius;\n          this.speedX = 0;\n          this.speedY = 5;\n          this.delayed = 0;\n          if (this.lives.count <= 0) {\n            alert(`Perdeste com ${this.score.count} Ponto${this.score.count === 1 ? \"\" : \"s\"}!!`);\n            this.score.count = 0;\n            this.lives.count = 5;\n            setKeyStates({\n              upIsDown: false,\n              rightIsDown: false,\n              leftIsDown: false,\n            });\n          }\n        }\n      }\n\n      if (this.side === \"left\" && this.x > game.width / 2 && this.y > game.height - this.radius - 2) {\n        this.side = \"right\";\n        this.score.count++;\n      }\n      if (this.side === \"right\" && this.x < game.width / 2 && this.y > game.height - this.radius - 2) {\n        this.side = \"left\";\n        this.score.count++;\n      }\n    }\n  }\n\n  updatePos() {\n    this.updateX();\n    this.updateY();\n  }\n\n  delay(ms: number) {\n    this.finalDelayTime = Date.now() + ms;\n    this.delaying = true;\n    this.delayed++;\n  }\n\n  delayStop() {\n    if (this.delaying && Date.now() > this.finalDelayTime) {\n      this.delaying = false;\n      this.finalDelayTime = 0;\n    }\n  }\n\n  restart() {\n    this.x = this.initX;\n    this.y = this.initY;\n    this.walkSpeed = 2;\n    this.jumpSpeed = 20;\n    this.lives.count = 5;\n    this.score.count = 0;\n    this.side = \"left\";\n    this.touchingLava = false;\n    this.delaying = false;\n    this.delayed = 0;\n    this.finalDelayTime = 0;\n    this.speedX = 0;\n    this.speedY = 0;\n    this.visible = true;\n  }\n}\n\n\n// function Ball(x, y) { /*collapseit*/\n//   Circle.call(this, x, y, 15);\n//   this.speedX = 0;\n//   this.speedY = 0;\n//   this.color = \"#0000FF\";\n//   this.walkSpeed = 2;\n//   this.jumpSpeed = 20;\n//   this.side = \"left\";\n//   this.touchingLava = false;\n//   this.delaying = false;\n//   this.delayed = 0;\n//   this.finalDelayTime = 0;\n//   this.lives = new PlayerInfo(10, 40, \"lives\", \"start\", 5);\n//   this.score = new PlayerInfo(10, 80, \"score\", \"start\", 0);\n// }\n// Ball.prototype = Object.create(Circle.prototype);\n// Ball.prototype.constructor = Ball;\n// Ball.prototype.drawText = function () { /*collapseit*/\n//   this.lives.text = livesText_lang + \" = \" + this.lives.count;\n//   this.lives.updateContext();\n//   this.lives.draw();\n//   this.score.text = scoreText_lang + \" = \" + this.score.count;\n//   this.score.updateContext();\n//   this.score.draw();\n// };\n// Ball.prototype.updateX = function () { /*collapseit*/\n//   if (!this.delaying) {\n//     this.speedX = this.speedX * 0.7;\n//     if (leftIsDown && this.x > this.radius) {\n//       this.speedX = this.speedX - this.walkSpeed;\n//     }\n//     if (rightIsDown && this.x < game.width - this.radius) {\n//       this.speedX = this.speedX + this.walkSpeed;\n//     }\n//     this.x = this.x + this.speedX;\n//     //console.log(this.speedX);\n//     if (this.x < this.radius) {\n//       if (this.speedX < 0) {\n//         click.play();\n//       }\n//       this.speedX = 0;\n//       this.x = this.radius;\n//     }\n//     if (this.x > game.width - this.radius) {\n//       if (this.speedX > 0) {\n//         click.play();\n//       }\n//       this.speedX = 0;\n//       this.x = game.width - this.radius;\n//     }\n//   }\n// };\n// Ball.prototype.updateY = function () { /*collapseit*/\n//   if (!this.delaying) {\n//     if (this.speedY === 1 && this.y > game.height - this.radius - 1 && upIsDown) {\n//       this.speedY = -this.jumpSpeed;\n//     }\n//     if (downIsDown) {\n//       this.speedY += 1;\n//     }\n//     this.y = this.y + this.speedY;\n//     if (this.y > game.height - this.radius) {\n//       if (this.speedY > 10) {\n//         click.play();\n//       }\n//       this.speedY = 0;\n//       this.y = game.height - this.radius;\n//     }\n//     this.speedY++;\n//     if (this.y < this.radius) {\n//       if (this.speedY < -10) {\n//         click.play();\n//       }\n//       this.speedY = 0;\n//       this.y = this.radius;\n//     }\n//   }\n// };\n// Ball.prototype.checkPos = function () { /*collapseit*/\n//   if (!this.delaying) {\n//   var lava = game.container.lava;\n//     if (this.y > lava.y - this.radius && this.x > lava.x - this.radius + 5 && this.x < lava.x + lava.width + 5) {\n//       this.speedX = 0;\n//       this.speedY = 0;\n//       this.y = lava.y - this.radius;\n//       this.touchingLava = true;\n//     }\n//     if (this.x > lava.x - this.radius && this.y > lava.y - this.radius && this.x < lava.x + lava.width / 2) {\n//       this.speedX = 0;\n//       this.x = lava.x - this.radius;\n//       this.touchingLava = true;\n//     }\n//     if (this.x > lava.x + lava.width / 2 && this.y > lava.y - this.radius && this.x < lava.x + lava.width + this.radius) {\n//       this.speedX = 0;\n//       this.x = lava.x + lava.width + this.radius;\n//       this.touchingLava = true;\n//     }\n//     if (this.touchingLava || this.delayed > 0) {\n//       this.touchingLava = false;\n\n//       if (this.delayed === 0) {\n//         this.delay(100);\n//       }\n//       if (!this.delaying) {\n//         if (this.delayed === 1) {\n//           bellRing.play();\n//           this.delay(650);\n//         }\n//         if (!this.delaying) {\n//           if (this.delayed === 2) {\n//             this.lives.count--;\n//             this.delay(650);\n//           }\n//           if (!this.delaying) {\n//             this.side = \"left\";\n//             this.x = 100 + this.radius\n//             this.y = game.height / 2 + this.radius;\n//             this.speedX = 0;\n//             this.speedY = 5;\n//             this.delayed = 0;\n//             if (this.lives.count <= 0) { //Game Ended\n//               if (this.score.count === 1) {\n//                 alert(\"Perdeste com \" + this.score.count + \" Ponto!!\");\n//               } else {\n//                 alert(\"Perdeste com \" + this.score.count + \" Pontos!!\");\n//               }\n//               this.score.count = 0;\n//               this.lives.count = 5;\n//               upIsDown = false;\n//               rightIsDown = false;\n//               leftIsDown = false;\n//             }\n//           }\n//         }\n//       }\n//     } //SCORE\n//     if (this.side === \"left\" && this.x > game.width / 2 && this.y > game.height - this.radius - 2) {\n//       this.side = \"right\";\n//       this.score.count++;\n//     }\n//     if (this.side === \"right\" && this.x < game.width / 2 && this.y > game.height - this.radius - 2) {\n//       this.side = \"left\";\n//       this.score.count++;\n//     }\n//   }\n// };\n// Ball.prototype.updatePos = function () { /*collapseit*/\n//   this.updateX();\n//   this.updateY();\n// };\n// Ball.prototype.delay = function (ms) { /*collapseit*/\n//   ms += new Date().getTime();\n//   this.finalDelayTime = ms;\n//   this.delaying = true;\n//   this.delayed++;\n// };\n// Ball.prototype.delayStop = function () { /*collapseit*/\n//   if (this.delaying) {\n//     if (new Date().getTime() > this.finalDelayTime) {\n//       this.delaying = false;\n//       this.finalDelayTime = 0;\n//     }\n//   }\n// };\n// Ball.prototype.restart = function () { /*collapseit*/\n//   this.x = this.initX;\n//   this.y = this.initY;\n//   this.walkSpeed = 2;\n//   this.jumpSpeed = 20;\n//   this.lives.count = 5;\n//   this.score.count = 0;\n//   this.side = \"left\";\n//   this.touchingLava = false;\n//   this.delaying = false;\n//   this.delayed = 0;\n//   this.finalDelayTime = 0;\n//   this.speedX = 0;\n//   this.speedY = 0;\n//   this.visible = true;\n// };\n\nclass GameState extends Rectangle { /*collapseit*/\n  container: { [key: string]: any };\n  constructor() {\n    super(canvas.width / 2 - 500, canvas.height / 2 - 300, 1000, 600);\n    this.outlinePosition = \"outer\";\n    this.color = \"#2f538e\";\n    this.visible = false;\n    this.doTranslate = true;\n    this.container = new Object();\n  }\n  // getAllProperties() {\n  //   var properties = [];\n  //   for (var prop in this) {\n  //     if (this.hasOwnProperty(prop) && typeof this[prop] !== \"function\") {\n  //       properties.push(this[prop]);\n  //     }\n  //   }\n  //   return properties;\n  // };\n  draw() { /*collapseit*/\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    if (this.visible) { //Draw itself\n      c.lineWidth = this.outlineWidth;\n      c.fillStyle = this.color;\n      c.strokeStyle = this.outlineColor;\n      c.lineWidth = this.outlineWidth;\n      c.fillRect(this.x, this.y, this.width, this.height);\n      this.drawParts_outline();\n      this.drawParts_patterns();\n    }\n    if (this.doTranslate) {\n      c.translate(this.x, this.y);\n    }\n    if (this.visible) {\n      var contents = this.container.getAllProperties();\n      \n      //Order controls by showIndex\n      var indices = [];\n      var controls = [];\n      for (let i = 0; i < contents.length; i++) {\n        if (typeof contents[i] == \"object\" && typeof contents[i].showIndex == \"number\") {\n          indices.push(i);\n          controls.push(contents[i]);\n        }\n      }\n      controls.sort(function(a,b){return a.showIndex-b.showIndex}); //Lower is drawn first, in back.\n      for (let i = 0; i < controls.length; i++) {\n        contents[indices[i]] = controls[i];\n      }\n      //Draw everything in its container\n      for (let i = 0; i < contents.length; i++) { //Lembrar que também há um destes na Window.\n        switch (typeof(contents[i])) {\n        case \"object\":\n          if (contents[i]instanceof TextButton) {\n            contents[i].update();\n            contents[i].draw();\n          } else if (contents[i]instanceof Label) {\n            contents[i].updateLanguage();\n            contents[i].updateContext();\n            contents[i].draw();\n          } else if (contents[i]instanceof Window) {\n            contents[i].draw();\n            contents[i].updatePos();\n          } else if (contents[i]instanceof Ball) {\n            contents[i].drawText();\n            contents[i].checkPos();\n            contents[i].draw();\n            contents[i].updatePos();\n            contents[i].delayStop();\n          } else {\n            contents[i].draw();\n          }\n          break;\n        case \"function\":\n          if (!(contents[i].toString().includes(\"getAllInstances\")||contents[i].toString().includes(\"getAllProperties\"))) {\n            contents[i]();\n          }\n          break;\n        }\n      }\n    }\n  };\n}\n\nclass Window extends Rectangle { /*collapseit*/\n  maxYMoveSpeed: number;\n  showing: boolean;\n  hiding: boolean;\n  container: {};\n  constructor(width: number, height: number) {\n    super(canvas.width/2 - width/2, -height, width, height);\n    this.doTranslate = true;\n    this.color = \"#1062e8\";\n    this.outlinePosition = \"inner\";\n    this.showIndex = 100;\n    this.maxYMoveSpeed = 40;\n    this.showing = false;\n    this.hiding = false;\n    this.container = new Object();\n  }\n  draw() { /*collapseit*/\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    if (this.visible) { //Draw itself\n      c.lineWidth = this.outlineWidth;\n      c.fillStyle = this.color;\n      c.strokeStyle = this.outlineColor;\n      c.lineWidth = this.outlineWidth;\n      c.fillRect(this.x, this.y, this.width, this.height);\n      this.drawParts_outline();\n      this.drawParts_patterns();\n    }\n    if (this.doTranslate) {\n      c.translate(this.x, this.y);\n    }\n    if (this.visible) {\n      var contents = this.container.getAllProperties();\n      //Order controls by showIndex\n      var indices = [];\n      var controls = [];\n      for (let j = 0; j < contents.length; j++) {\n        if (typeof contents[j] == \"object\" && typeof contents[j].showIndex == \"number\") {\n          indices.push(j);\n          controls.push(contents[j]);\n        }\n      }\n      controls.sort(function(a,b){return b.showIndex-a.showIndex});\n      for (let j = 0; j < controls.length; j++) {\n        contents[indices[j]] = controls[j];\n      }\n      //Draw everything in its container\n      for (let j = 0; j < contents.length; j++) { //Lembrar que também há um destes na GameState.\n        switch (typeof(contents[j])) {\n        case \"object\":\n          if (contents[j]instanceof TextButton) {\n            contents[j].update();\n            contents[j].draw();\n          } else if (contents[j]instanceof Label) {\n            contents[j].updateLanguage();\n            contents[j].updateContext(); //TODO antes estava contents[i].updateContext(); verificar se funciona\n            contents[j].draw();\n          } else if (contents[j]instanceof Ball) {\n            contents[j].drawText();\n            contents[j].checkPos();\n            contents[j].draw();\n            contents[j].updatePos();\n            contents[j].delayStop();\n          } else {\n            contents[j].draw();\n          }\n          break;\n        case \"function\":\n          if (!(contents[j].toString().includes(\"getAllInstances\")||contents[j].toString().includes(\"getAllProperties\"))) {\n            contents[j]();\n          }\n          break;\n        }\n      }\n      \n    }\n    c.setTransform(1, 0, 0, 1, 0, 0);\n    c.translate(game.x, game.y); //considering that there is a game GameState\n  };\n  \n  updatePos() { /*collapseit*/\n    var showProgress = distance(0, this.y, 0, canvas.height / 2 - this.height / 2) /*Current*/ /\n                        distance(0, -this.height, 0, canvas.height / 2 - this.height / 2) /*Total*/;\n    var hideProgress = distance(0, this.y, 0, canvas.height) /*Current*/ /\n                        distance(0, canvas.height / 2 - this.height / 2, 0, canvas.height) /*Total*/;\n    if (this.showing) {\n      this.y += this.maxYMoveSpeed*showProgress;\n      if (Math.round(this.y) == Math.round(canvas.height / 2 - this.height / 2)) {\n        this.showing = false;\n      }\n    }\n    if (this.hiding) {\n      this.y += this.maxYMoveSpeed*(1-hideProgress)+1;\n      if (this.y > canvas.height) {\n        this.hiding = false;\n      }\n    }\n  };\n  \n  show() { /*collapseit*/\n    this.visible = true;\n    this.x = canvas.width/2 - this.width/2;\n    this.y = -this.height;\n    this.showing = true;\n    this.hiding = false;\n  };\n  \n  hide() { /*collapseit*/\n    this.visible = true;\n    this.x = canvas.width/2 - this.width/2;\n    this.y = canvas.height/2 - this.height/2;\n    this.showing = false;\n    this.hiding = true;\n  };\n}\n\nexport { TextButton, PlayerInfo, Ball, GameState, Window };","import \"../languages/TheBallGame\";\nimport { AnimationLOOP, download, Label, Rectangle } from \"../JSTools\";\nimport { c } from \"./Initialization\";\nimport { setKeyStates } from \"./Events\";\nimport { Ball, GameState, TextButton } from \"./Classes\";\n\nvar game = new GameState();\nvar mainMenu = new GameState();\nvar options = new GameState();\nmainMenu.visible = true;\n//game\n/*var rect = new Rectangle();\nrect.doTranslate = true; Isto é o antigo rect.*/\ngame.container.player = new Ball(100+15, game.height / 2 + 15);\n\ngame.container.lava = new Rectangle(game.width / 2 - 50, game.height - 130, 100, 130);\ngame.container.lava.doPattern = \"diagonals\";\ngame.container.lava.color = \"orange\";\ngame.container.lava.outlineColor = \"red\";\ngame.container.lava.outlineWidth = 2;\ngame.container.lava.outlinePosition = \"inner\";\ngame.container.backToMenu_opt = new TextButton(game.width/2, 50, (window as any).globals.backToMenu_lang, \"center\", 40, 5);\ngame.container.backToMenu_opt.updateLanguage = function(){this.text=(window as any).globals.backToMenu_lang};\nmainMenu.container.playGame_opt = new TextButton(game.width/2, 130, (window as any).globals.playGameOption_lang, \"center\", 50, 5);\nmainMenu.container.playGame_opt.updateLanguage = function(){this.text=(window as any).globals.playGameOption_lang};\nmainMenu.container.options_opt = new TextButton(game.width/2, 220, (window as any).globals.optionsOption_lang, \"center\", 50, 5);\nmainMenu.container.options_opt.updateLanguage = function(){this.text=(window as any).globals.optionsOption_lang};\nmainMenu.container.download_opt = new TextButton(game.width/2, 310, (window as any).globals.downloadOption_lang, \"center\", 50, 5);\nmainMenu.container.download_opt.updateLanguage = function(){this.text=(window as any).globals.downloadOption_lang};\noptions.container.exitOptions_opt = new TextButton(30, 30, (window as any).globals.exitOptionsButton_lang, \"start\", 30, 5);\noptions.container.exitOptions_opt.updateLanguage = function(){this.text=(window as any).globals.exitOptionsButton_lang};\noptions.container.optionsSoon = new Label(game.width/2, game.height/2 - 15, (window as any).globals.optionsSoon_lang, \"center\");\noptions.container.optionsSoon.textHeight = 100;\noptions.container.optionsSoon.updateLanguage = function(){this.text=(window as any).globals.optionsSoon_lang};\n{ // onClick events for the TextButtons\n  game.container.backToMenu_opt.onclick = function () {\n    game.visible = false;\n    mainMenu.visible = true;\n    options.visible = false;\n  };\n  mainMenu.container.playGame_opt.onclick = function () {\n    game.visible = true;\n    mainMenu.visible = false;\n    options.visible = false;\n    game.container.player.restart();\n  };\n  mainMenu.container.options_opt.onclick = function () {\n    game.visible = false;\n    mainMenu.visible = false;\n    options.visible = true;\n  };\n  mainMenu.container.download_opt.onclick = function () {\n    download('https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1');\n  };\n  options.container.exitOptions_opt.onclick = function () {\n    game.visible = false;\n    mainMenu.visible = true;\n    options.visible = false;\n  };\n}\n\n//debug\nvar debugMode = false;\nvar debugTax = 6;\nvar debugFrameRate: number;\nvar debugTimer: number;\n\n//var gameState = \"mainMenu\"; /*\t'mainMenu'\t'game'\t'options'\t*/\n/*------------------------------------LOOP-----------------------------------------*/  \nAnimationLOOP(function(){\n  /*rect.draw();*/\n  game.draw();\n  mainMenu.draw();\n  options.draw();\n  /*switch (gameState) {\n  case 'game':\n    lava.draw();\n    player.drawText();\n    player.checkPos();\n    player.draw();\n    player.updatePos();\n    backToMenu_opt.draw();\n    backToMenu_opt.updateEvents();\n    backToMenu_opt.text = backToMenu_lang;\n\n    player.delayStop();\n    break;\n  case 'mainMenu':\n    rect.color = \"#2f538e\";\n    playGame_opt.draw();\n    playGame_opt.updateEvents();\n    playGame_opt.text = playGameOption_lang;\n    options_opt.draw();\n    options_opt.updateEvents();\n    options_opt.text = optionsOption_lang;\n    download_opt.draw();\n    download_opt.updateEvents();\n    download_opt.text = downloadOption_lang;\n    break;\n  case 'options':\n    optionsSoon.draw();\n    optionsSoon.text = optionsSoon_lang;\n    exitOptions_opt.draw();\n    exitOptions_opt.updateEvents();\n    exitOptions_opt.text = exitOptionsButton_lang;\n    break;\n  }*/\n  \n  drawDebug();\n});\n\n/*------------------------------------FUNCTIONS------------------------------------*/\nfunction drawDebug() { /* collapseit */\n  if (!document.hasFocus()) {\n    setKeyStates({\n      upIsDown: false,\n      leftIsDown: false,\n      rightIsDown: false,\n    })\n  }\n  if (debugMode) {\n    c.fillStyle = \"white\";\n    c.font = \"bold 15px Tahoma\";\n    debugTax++;\n    if (debugTax > 6) {\n      debugTax = 0;\n      debugFrameRate = (new Date().getTime()) - debugTimer;\n    }\n    c.fillText(String(debugFrameRate), game.width - 40, 40);\n  }\n  debugTimer = new Date().getTime();\n}\n\nexport { game };"],"names":["lastKey","upIsDown","leftIsDown","rightIsDown","downIsDown","event","mouseX","mouseY","mouseIsDown","canvas","game","onresize","resizeCanvas","background","setKeyStates","states","dropdownLanguage","element","getCookie","setLanguage","backToIndex","download","ctx","toolBar","click","bellRing","language","TextButton","Label","x","y","text","xAlign","textHeight","hoveringHeightIncrement","__publicField","hovering1","hovering2","hovering3","hovering4","c","transparent","PlayerInfo","type","startCount","Ball","Circle","lava","ms","GameState","Rectangle","contents","indices","controls","i","a","b","Window","width","height","j","showProgress","distance","hideProgress","mainMenu","options","AnimationLOOP","drawDebug"],"mappings":"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"}