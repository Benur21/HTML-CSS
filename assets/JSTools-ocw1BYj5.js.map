{"version":3,"file":"JSTools-ocw1BYj5.js","sources":["../../src/globals.ts","../../src/JSTools.ts"],"sourcesContent":["(window as any).globals = {\n  windowRatio: undefined,\n  canvasRatio: undefined,\n  toolBarHeight: 27,\n  canvasScale: undefined as number | undefined,\n}\n\n","import './globals';\nlet mouseProvider: (() => { x: number; y: number; isDown: boolean }) | null = null;\n/*--------------------------------------Function-1------------------------------------------------------------------*/\nfunction backToIndex(){ /*collapse(1,313)*/\n  var currentURL = location.href;\n  location.href = currentURL.slice(0, currentURL.lastIndexOf(\"/\")) + \"/index.html\";\n}\n/*--------------------------------------Function-2------------------------------------------------------------------*/\nfunction element(id: string){\n  return document.getElementById(id);\n}\n/*--------------------------------------Function-3------------------------------------------------------------------*/\nfunction getRandomColor() {\n  var letters = '0123456789ABCDEF';\n  var color = '#';\n  for (var i = 0; i < 6; i++ ) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n  return color;\n}\n/*--------------------------------------Function-4------------------------------------------------------------------*/\nfunction resizeCanvas(){\n  const canvas = (window as any).globals.canvas;\n  //Get Window Ratio\n  (window as any).globals.windowRatio = window.innerWidth / (window.innerHeight - (window as any).globals.toolBarHeight);\n  //Get Canvas Ratio\n  (window as any).globals.canvasRatio = canvas.width / canvas.height;\n  if ((window as any).globals.canvasRatio > (window as any).globals.windowRatio) {\n    canvas.style.width = window.innerWidth + \"px\";\n    canvas.style.height = \"\";\n    canvas.style.left = \"0px\";\n    canvas.style.top = ((window.innerHeight - (window as any).globals.toolBarHeight) / 2 - (window.innerWidth / (window as any).globals.canvasRatio) / 2 + (window as any).globals.toolBarHeight) + \"px\";\n    (window as any).globals.canvasScale = Number(canvas.style.width.replace(\"px\", \"\")) / canvas.width;\n  } else if ((window as any).globals.canvasRatio <= (window as any).globals.windowRatio) {\n    canvas.style.width = \"\";\n    canvas.style.height = window.innerHeight - (window as any).globals.toolBarHeight + \"px\";\n    canvas.style.left = (window.innerWidth / 2 - ((window.innerHeight - (window as any).globals.toolBarHeight) * (window as any).globals.canvasRatio) / 2) + \"px\";\n    canvas.style.top = (window as any).globals.toolBarHeight + \"px\";\n    (window as any).globals.canvasScale = Number(canvas.style.height.replace(\"px\", \"\")) / canvas.height;\n  }\n}\n/*--------------------------------------Function-5------------------------------------------------------------------*/\nfunction toRadian(deg: number) {\n  return deg * Math.PI/180;\n}\n/*--------------------------------------Function-6------------------------------------------------------------------*/\nfunction toDegree(rad: number) {\n  return rad * 180 / Math.PI;\n}\n/*--------------------------------------Function-7------------------------------------------------------------------*/\nfunction random(min: number, max: number, exp: number) {\n  let rand = Math.random();\n  rand = rand * (max - min) + min;\n  if (exp < 1 && exp > 0) {\n    rand = rand * invertFraction(exp, 1);\n  } else {\n    rand = rand / exp;\n  }\n  rand = Math.round(rand);\n  if (exp < 1 && exp > 0) {\n    return rand / invertFraction(exp, 1);\n  } else {\n    return rand * exp;\n  }\n}\n/*--------------------------------------Function-8------------------------------------------------------------------*/\nfunction invertFraction(numerator: number, denominator: number){\n  return denominator/numerator;\n}\n/*--------------------------------------Function-8------------------------------------------------------------------*/\nfunction distance(x1: number,y1: number,x2: number,y2: number){\n  var difX = x1-x2;\n  var difY = y1-y2;\n  return Math.sqrt(Math.abs(difX*difX+difY*difY));\n}\n/*--------------------------------------Function-9------------------------------------------------------------------*/\nfunction download(url: string){\n  var downloadFrame = document.createElement(\"iframe\");\n  downloadFrame.height = \"0px\";\n  downloadFrame.width = \"0px\";\n  downloadFrame.src = url;\n  document.body.appendChild(downloadFrame);\n  setTimeout(function(){removeElement(downloadFrame)},10000);\n}\n/*--------------------------------------Function-10-----------------------------------------------------------------*/\nfunction removeElement(elem: HTMLElement) {\n  elem.parentNode!.removeChild(elem);\n}\n/*--------------------------------------Function-11-----------------------------------------------------------------*/\nfunction getCookie(cname: string) {\n  var name = cname + \"=\";\n  var decodedCookie = decodeURIComponent(document.cookie);\n  var ca = decodedCookie.split(';');\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1);\n    }\n    if (c.indexOf(name) == 0) {\n      return c.substring(name.length, c.length);\n    }\n  }\n  return \"\";\n}\n/*--------------------------------------Function-12-----------------------------------------------------------------*/\nFunction.prototype.getAllInstances = function () {\n  //getAllInstances (!IMPORTANT!)\n  var arr = [];\n  for (let property in window) {\n    if (window[property] instanceof this){\n      arr.push(window[property]);\n    }\n  }\n  return arr;\n}\n/*--------------------------------------Function-13-----------------------------------------------------------------*/\nObject.prototype.getAllProperties = function () {\n  //getAllProperties (!IMPORTANT!)\n  var arr = [];\n  for (let property in this) {\n    if (\n      !(this as { [a: string]: any })[property]\n        .toString()\n        .includes('getAllInstances') &&\n      !(this as { [a: string]: any })[property]\n        .toString()\n        .includes('getAllProperties')\n    ) {\n      arr.push((this as { [a: string]: any })[property]);\n    }\n  }\n  return arr;\n}\n/*--------------------------------------Function-14-----------------------------------------------------------------*/\nArray.prototype.getControlByName = function (name: string) { //Ver se é mesmo necessário, não deve ser, então é pra apagar.\n  return this.find(function(control){return control.name.toLowerCase() == name.toLowerCase()})\n}\n/*--------------------------------------Function-15-----------------------------------------------------------------*/\n//Function.prototype.callIndex = 0;\n/*--------------------------------------Function-16-----------------------------------------------------------------*/\nvar functionSaved = false;\nvar functionSave: () => void;\nfunction AnimationLOOP (funct: () => void) {\n  const canvas = (window as any).globals.canvas;\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n  if (!functionSaved) {\n    functionSave = funct;\n    functionSaved = true;\n  }\n  ctx.setTransform(1, 0, 0, 1, 0, 0); // reset transforms\n  ctx.clearRect(0,0,canvas.width,canvas.height);\n  functionSave();\n  requestAnimationFrame(AnimationLOOP as any);\n}\n/*--------------------------CLASSES-----Function-17-----------------------------------------------------------------*/\nvar transparent = \"rgba(0,0,0,0)\";\nclass Control {\n  x: number;\n  y: number;\n  initX: number;\n  initY: number;\n  color: string;\n  outlineColor: string;\n  outlineWidth: number;\n  visible: boolean;\n  showIndex: number;\n  parent?: Control;\n  constructor(x: number, y: number) {\n    this.x = x;\n    this.y = y;\n    this.initX = x; //[Inserir razão destes dois]\n    this.initY = y;\n    this.color = transparent;\n    this.outlineColor = \"black\";\n    this.outlineWidth = 2;\n    this.visible = true;\n    this.showIndex = 0; //Lower is drawn first, in back.\n    //this.name = \"\"; //Ver função getControlByName\n    \n    // @ts-ignore\n    window[this.constructor.name + Math.random() * 10**18] = this;\n  }\n  \n  /**\n   * show\n   */\n  public show() {\n    this.visible = true;\n  }\n  public hide() {\n    this.visible = false;\n  };\n  \n}\n/*--------------------------------------Function-18-----------------------------------------------------------------*/\nclass Rectangle extends Control {\n  width: number;\n  height: number;\n  outlinePosition: string;\n  doPattern: string;\n  constructor (x: number, y: number, width: number, height: number) {\n    super(x, y);\n    this.width = width;\n    this.height = height;\n    this.outlineWidth = 4;\n    this.outlinePosition = \"center\";\n    this.doPattern = \"\";\n  }\n  \n  public draw() {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    if (this.visible) {\n      ctx.fillStyle = this.color;\n      ctx.strokeStyle = this.outlineColor;\n      ctx.lineWidth = this.outlineWidth;\n      ctx.fillRect(this.x, this.y, this.width, this.height);\n      this.drawParts_outline();\n      this.drawParts_patterns();\n    }\n  }\n  \n  drawParts_outline() {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    switch (this.outlinePosition.toLowerCase()) {\n    case \"inner\":\n      ctx.strokeRect(this.x + this.outlineWidth / 2, this.y + this.outlineWidth / 2, this.width - this.outlineWidth, this.height - this.outlineWidth);\n      break;\n    case \"center\":\n      ctx.strokeRect(this.x, this.y, this.width, this.height);\n      break;\n    case \"outer\":\n      ctx.strokeRect(this.x - this.outlineWidth / 2, this.y - this.outlineWidth / 2, this.width + this.outlineWidth, this.height + this.outlineWidth);\n      break;\n    }\n  }\n  \n  drawParts_patterns() {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    switch (this.doPattern.toLowerCase()) {\n    case \"diagonals\":\n      ctx.beginPath();\n      var x1 = this.x;\n      var y1 = this.y;\n      var x2 = this.x;\n      var y2 = this.y;\n      var increment = 6;\n      var count = 0;\n      while (!(x1 == this.x + this.width)) {\n        x1++;\n        y2++;\n        count++;\n        if (count == increment) {\n          count = 0;\n          ctx.moveTo(x1, y1);\n          ctx.lineTo(x2, y2);\n        }\n      }\n      while (!(y2 == this.y + this.height)) {\n        y1++;\n        y2++;\n        count++;\n        if (count == increment) {\n          count = 0;\n          ctx.moveTo(x1, y1);\n          ctx.lineTo(x2, y2);\n        }\n      }\n      while (!(y1 == this.y + this.height)) {\n        y1++;\n        x2++;\n        count++;\n        if (count == increment) {\n          count = 0;\n          ctx.moveTo(x1, y1);\n          ctx.lineTo(x2, y2);\n        }\n      }\n      ctx.stroke();\n      this.x = this.initX;\n      this.y = this.initY;\n      break;\n    } //\n  };\n}\n/*--------------------------------------Function-19-----------------------------------------------------------------*/\nclass Circle extends Control {\n  radius: number;\n\n  constructor(x: number, y: number, radius: number) {\n    super(x, y); // Inherit from Control\n    this.radius = radius;\n  }\n\n  draw() {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    if (this.visible) {\n      ctx.beginPath();\n      ctx.fillStyle = this.color;\n      ctx.strokeStyle = this.outlineColor;\n      ctx.lineWidth = this.outlineWidth;\n      ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n      ctx.fill();\n      ctx.stroke();\n    }\n  }\n\n  goTo(newX: number, newY: number) {\n    this.x = newX + this.radius;\n    this.y = newY + this.radius;\n  }\n}\n/*--------------------------------------Function-20-----------------------------------------------------------------*/\nclass Label extends Control {\n  text: string;\n  textHeight: number;\n  fontFamily: string;\n  xAlign: \"start\" | \"center\";\n  yAlign: \"middle\" | \"top\";\n  constructor(x: number, y: number, text: string, xAlign: \"start\" | \"center\") {\n    super(x, y); //Inherit from Control\n    this.text = text;\n    this.color = \"white\";\n    this.outlineColor = transparent;\n    this.textHeight = 30;\n    this.fontFamily = \"Tahoma\";\n    this.xAlign = xAlign; //Horizontal Aligning\n    this.yAlign = \"middle\"; //Vertical Aligning\n  }\n  /**\n   * Call before Lable.draw\n   */\n  updateContext () {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    if (this.visible) {\n      ctx.fillStyle = this.color;\n      ctx.textAlign = this.xAlign;\n      ctx.textBaseline = this.yAlign;\n      ctx.strokeStyle = this.outlineColor;\n      ctx.lineWidth = this.outlineWidth;\n      ctx.font = \"bold \" + this.textHeight + \"px \" + this.fontFamily;\n    }\n  }\n  /**\n   * Call after Label.updateContext\n   */\n  draw () {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    if (this.visible) {\n      // support multi-line text\n      const lines = this.text.split(/\\r?\\n/);\n      const lineHeight = this.textHeight * 1.2;\n\n      // Use 'middle' baseline for consistent vertical centering per line\n      if (this.yAlign === \"middle\") ctx.textBaseline = \"middle\"\n      else if (this.yAlign === \"top\") ctx.textBaseline = \"top\";\n\n      // Compute starting Y so multi-line block is centered when yAlign === \"middle\"\n      let startY: number;\n      if (this.yAlign === \"middle\") {\n        startY = this.y - ((lines.length - 1) / 2) * lineHeight;\n      } else {\n        // fallback: align first line at this.y\n        startY = this.y;\n      }\n\n      for (let i = 0; i < lines.length; i++) {\n        const lineY = startY + i * lineHeight;\n        ctx.strokeText(lines[i], this.x, lineY);\n        ctx.fillText(lines[i], this.x, lineY);\n      }\n    }\n  };\n  updateLanguage () {\n    this.text = \"<!ERROR!>\";\n  };\n}\n/*--------------------------------------Function-20-----------------------------------------------------------------*/\n// function Button(x: number, y: number, width: number, height: number, text: string) {\n//   Rectangle.call(this, x, y, 50, 81); \n//   this.label = new Label(x, y, text, 'center');\n//   this.label.outlineWidth = 6;\n//   this.label.outlineColor = \"black\";\n//   this.autoResize = \"true\";\n//   this.color = \"#3e7fe8\";\n// }\n// Button.prototype = Object.create(Rectangle.prototype);\n// Button.prototype.constructor = Button;\n// Button.prototype.draw = function () {\n//   const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n  \n//   if (this.visible) {\n//     //RECTANGLE DRAWING;\n//     //Configs:\n//     ctx.fillStyle = this.color;\n//     ctx.lineWidth = this.outlineWidth;\n//     ctx.strokeStyle = this.outlineColor;\n//     //AutoResize:\n//     var textWidth = ctx.measureText(this.label.text).width;\n//     var textHeight = this.label.textHeight;\n//     if (this.autoResize) {\n//       if (this.width < textWidth) {\n//         this.width = textWidth;\n//       }\n//       if (this.height < textHeight) {\n//         this.height = textHeight + 20;\n//       }\n//     }\n//     //Updating init coordinates:\n//     this.initX = this.x;\n//     this.initY = this.y;\n//     //Centering Button:\n//     this.x = this.initX-this.width/2;\n//     this.y = this.initY-this.height/2;\n//     //Filling Rectangle:\n//     ctx.fillRect(this.x, this.y, this.width, this.height);\n//     //Stroke Drawing:\n//     this.drawParts_outline();\n//     //Recovering coordinates:\n//     this.x = this.initX;\n//     this.y = this.initY;\n//     //Rectangle Done.\n    \n//     //TEXT DRAWING;\n//     //Updating label coordinates to be the same as the button ones:\n//     this.label.x = this.x;\n//     this.label.y = this.y;\n//     //Drawing Text:\n//     this.label.draw();\n//     //Label Done.\n//   }\n// }\n// Button.prototype.onhover = function () {\n//   const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n  \n//   if (this.xAlign == \"center\") { //Para sincronizar o hovering com os align, e para verificar se há hovering.\n//     var hovering1 = mouseX > this.x - ctx.measureText(this.text).width / 2 - this.hoveringHeightIncrement;\n//     var hovering2 = mouseX < this.x + ctx.measureText(this.text).width / 2 + this.hoveringHeightIncrement;\n//     var hovering3 = mouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n//     var hovering4 = mouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n//   } else if (this.xAlign == \"start\") {\n//     var hovering1 = mouseX > this.x - this.hoveringHeightIncrement;\n//     var hovering2 = mouseX < this.x + ctx.measureText(this.text).width + this.hoveringHeightIncrement;\n//     var hovering3 = mouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n//     var hovering4 = mouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n//   }\n//   this.internal_hovered = hovering1 && hovering2 && hovering3 && hovering4;\n//   if (this.internal_hovered) {\n//     if (!this.internal_mouseEnter) {\n//       this.internal_mouseEnter = true;\n//       this.textHeight += this.hoveringHeightIncrement;\n//     }\n//     this.internal_mouseLeave = false;\n//     this.outlineColor = \"black\";\n//   } else {\n//     if (!this.internal_mouseLeave) {\n//       this.internal_mouseLeave = true;\n//       this.textHeight -= this.hoveringHeightIncrement;\n//     }\n//     this.internal_mouseEnter = false;\n//     this.internal_waitingForRelease = false;\n//     this.outlineColor = transparent;\n//   }\n// };\n/*--------------------------------------Function-21-----------------------------------------------------------------*/\nclass GameState extends Rectangle { /*collapseit*/\n  container: { [key: string]: any };\n  constructor() {\n    const canvas = (window as any).globals.canvas;\n    super(canvas.width / 2 - 500, canvas.height / 2 - 300, 1000, 600);\n    this.outlinePosition = \"outer\";\n    this.color = \"#2f538e\";\n    this.visible = false;\n    this.container = new Proxy({}, {\n      set: (target: any, prop: string | symbol, value: any) => {\n        target[prop as any] = value;\n        if (value && typeof value === \"object\" && \"parent\" in value) {\n          try { value.parent = this; } catch (e) { /* ignore readonly */ }\n        }\n        return true;\n      }\n    });\n  }\n  // getAllProperties() {\n  //   var properties = [];\n  //   for (var prop in this) {\n  //     if (this.hasOwnProperty(prop) && typeof this[prop] !== \"function\") {\n  //       properties.push(this[prop]);\n  //     }\n  //   }\n  //   return properties;\n  // };\n  draw() { /*collapseit*/\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.setTransform(1, 0, 0, 1, 0, 0); // reset transforms\n    super.draw();\n    if (this.visible) {\n      var contents = this.container.getAllProperties() as Array<any>;\n      \n      //Order controls by showIndex\n      var indices = [];\n      var controls = [];\n      for (let i = 0; i < contents.length; i++) {\n        if (typeof contents[i] == \"object\" && typeof contents[i].showIndex == \"number\") {\n          indices.push(i);\n          controls.push(contents[i]);\n        }\n      }\n      controls.sort((a, b) => a.showIndex - b.showIndex); //Lower is drawn first, in back.\n      for (let i = 0; i < controls.length; i++) {\n        contents[indices[i]] = controls[i];\n      }\n      \n      // Draw contents relative to GameState position\n      ctx.save();\n      ctx.translate(this.x, this.y);\n      \n      //Draw everything in its container\n      for (let i = 0; i < contents.length; i++) { //Lembrar que também há um destes na JSWindow.\n        switch (typeof(contents[i])) {\n        case \"object\":\n          contents[i].update && contents[i].update();\n          contents[i].updateLanguage && contents[i].updateLanguage();\n          contents[i].updateContext && contents[i].updateContext();\n          contents[i].drawText && contents[i].drawText();\n          contents[i].checkPos && contents[i].checkPos();\n          contents[i].draw && contents[i].draw();\n          contents[i].updatePos && contents[i].updatePos();\n          contents[i].delayStop && contents[i].delayStop();\n          break;\n        case \"function\":\n          if (!(contents[i].toString().includes(\"getAllInstances\")||contents[i].toString().includes(\"getAllProperties\"))) {\n            contents[i]();\n          }\n          break;\n        }\n      }\n      ctx.restore();\n    }\n  };\n}\n/*--------------------------------------Function-22-----------------------------------------------------------------*/\n/*\n * JSWindow is a class that represents a window in the game, which can be shown or hidden.\n * It extends the Rectangle class and has properties for size, position, and visibility.\n * It also has methods for drawing the window, updating its position, and showing or hiding it.\n * To use, its draw() and updatePos() methods should be called in the main loop.\n */\nclass JSWindow extends Rectangle { /*collapseit*/\n  maxYMoveSpeed: number;\n  showing: boolean;\n  hiding: boolean;\n  container: { [key: string]: any };\n  parent?: JSWindow | GameState;\n  constructor(width: number, height: number) {\n    const canvas = (window as any).globals.canvas;\n    // By default the JSWindow is centered in the canvas. If a parent is\n    // supplied we'll initialize relative to the parent's coordinates.\n    super(canvas.width/2 - width/2, -height, width, height);\n    this.color = \"#1062e8\";\n    this.outlinePosition = \"inner\";\n    this.maxYMoveSpeed = 40;\n    this.showing = false;\n    this.hiding = false;\n    this.container = new Proxy({}, {\n      // Add parent to any object added to the container\n      set: (target: any, prop: string | symbol, value: any) => {\n        target[prop as any] = value;\n        if (value && typeof value === \"object\" && \"parent\" in value) {\n          try { value.parent = this; } catch (e) { /* ignore readonly */ }\n        }\n        return true;\n      }\n    });\n    this.parent = undefined;\n  }\n  draw() { /*collapseit*/\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    super.draw();\n    if (this.visible) {\n      var contents = this.container.getAllProperties();\n      //Order controls by showIndex\n      var indices = [];\n      var controls = [];\n      for (let j = 0; j < contents.length; j++) {\n        if (typeof contents[j] == \"object\" && typeof contents[j].showIndex == \"number\") {\n          indices.push(j);\n          controls.push(contents[j]);\n        }\n      }\n      controls.sort(function(a,b){return b.showIndex-a.showIndex});\n      for (let j = 0; j < controls.length; j++) {\n        contents[indices[j]] = controls[j];\n      }\n      \n      // Draw contents relative to JSWindow position\n      ctx.save();\n      ctx.translate(this.x, this.y);\n      \n      //Draw everything in its container\n      for (let j = 0; j < contents.length; j++) { //Lembrar que também há um destes na GameState.\n        switch (typeof(contents[j])) {\n        case \"object\":\n          contents[j].update && contents[j].update();\n          contents[j].updateLanguage && contents[j].updateLanguage();\n          contents[j].updateContext && contents[j].updateContext();\n          contents[j].drawText && contents[j].drawText();\n          contents[j].checkPos && contents[j].checkPos();\n          contents[j].draw && contents[j].draw();\n          contents[j].updatePos && contents[j].updatePos();\n          contents[j].delayStop && contents[j].delayStop();\n          break;\n        case \"function\":\n          if (!(contents[j].toString().includes(\"getAllInstances\")||contents[j].toString().includes(\"getAllProperties\"))) {\n            contents[j]();\n          }\n          break;\n        }\n      }\n      ctx.restore();\n    }\n  };\n  \n  updatePos() { /*collapseit*/\n    const canvas = (window as any).globals.canvas;\n    // Compute show/hide targets relative to parent if present, otherwise use canvas\n    const targetShowY = this.parent ? (-this.parent.y + canvas.height / 2 - this.height / 2) : (canvas.height / 2 - this.height / 2);\n    const startShowY = this.parent ? (-this.parent.y - this.height) : -this.height;\n    const targetHideY = this.parent ? (-this.parent.y + canvas.height) : canvas.height;\n\n    const showProgress = distance(0, this.y, 0, targetShowY) /*Current*/ /\n                         distance(0, startShowY, 0, targetShowY) /*Total*/;\n    const hideProgress = distance(0, this.y, 0, targetHideY) /*Current*/ /\n                         distance(0, targetShowY, 0, targetHideY) /*Total*/;\n\n    if (this.showing) {\n      this.visible = true;\n      this.y += this.maxYMoveSpeed * showProgress;\n      if (Math.round(this.y) === Math.round(targetShowY)) {\n        this.showing = false;\n      }\n    }\n    if (this.hiding) {\n      this.y += this.maxYMoveSpeed * (1 - hideProgress) + 1;\n      if (this.y > targetHideY) {\n        this.hiding = false;\n        this.visible = false;\n      }\n    }\n  };\n  \n  show() { /*collapseit*/\n    const canvas = (window as any).globals.canvas;\n    // Starting position\n    this.x = this.parent ? (-this.parent.x + canvas.width / 2 - this.width / 2) : (canvas.width / 2 - this.width / 2);\n    this.y = this.parent ? (-this.parent.y - this.height) : -this.height;\n    this.showing = true;\n    this.hiding = false;\n  };\n  \n  hide() { /*collapseit*/\n    const canvas = (window as any).globals.canvas;\n    // Starting position\n    this.x = this.parent ? (-this.parent.x + canvas.width / 2 - this.width / 2) : (canvas.width / 2 - this.width / 2);\n    this.y = this.parent ? (-this.parent.y + canvas.height / 2 - this.height / 2) : (canvas.height / 2 - this.height / 2);\n    this.showing = false;\n    this.hiding = true;\n  };\n  /**\n   * @returns Returns true if this window is the topmost visible window.\n   */\n  isTopWindow(): boolean {\n    const jsWindows = JSWindow.getAllInstances() as Array<JSWindow>;\n    let topWindow: JSWindow | null = null;\n    let topShowIndex = -Infinity;\n    for (let i = 0; i < jsWindows.length; i++) {\n      if (jsWindows[i].visible && jsWindows[i].showIndex > topShowIndex) {\n        topShowIndex = jsWindows[i].showIndex;\n        topWindow = jsWindows[i];\n      }\n    }\n    return topWindow === this;\n  }\n}\n/*--------------------------------------Function-23-----------------------------------------------------------------*/\nclass TextButton extends Label {\n  hoveringHeightIncrement: number;\n  onclick: undefined | (() => void);\n  \n  internal_hovered: boolean;\n  internal_waitingForRelease: boolean;\n  internal_mouseEnter: boolean;\n  internal_mouseLeave: boolean;\n  constructor(x: number, y: number, text: string, xAlign: \"start\" | \"center\", textHeight: number, hoveringHeightIncrement: number) {\n    super(x, y, text, xAlign);\n    this.outlineWidth = 8;\n    this.textHeight = textHeight;\n    this.hoveringHeightIncrement = hoveringHeightIncrement;\n    this.onclick; //Função que define aquilo que vai acontecer ao clicar no botão. Será definida mais tarde, com um objeto mais específico.\n    //Variáveis internas que não deverão ser alteradas, pois não têm a ver com personalização:\n    this.internal_hovered = false; //Esta variável diz se o cursor em cima do botão.\n    this.internal_waitingForRelease = false;\n    this.internal_mouseEnter = false; //Esta só serve para o tamanho apenas aumentar uma vez quando o rato entrar no objeto.\n    this.internal_mouseLeave = true; //Para o tamanho apenas diminuir uma vez quando o rato sair do objeto.\n  }\n  \n  onhover() { /*collapseit*/\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    if (!this.isFocused()) {\n      return;\n    }\n    \n    // Map global mouse coords into the current canvas transform's local space so\n    // hit-testing matches where the control is actually drawn (considering translate). (Copilot code)\n    let localMouseX = getMouse().x;\n    let localMouseY = getMouse().y;\n    try {\n      const inv = ctx.getTransform()\n      inv.invertSelf(); // invertSelf is supported in modern browsers\n      const p = new DOMPoint(getMouse().x, getMouse().y).matrixTransform(inv);\n      localMouseX = p.x;\n      localMouseY = p.y;\n    } catch (e) {\n      console.warn(\"Could not invert canvas transform for mouse hit-testing.\", e);\n      // fallback to global mouse coords if transform inversion fails\n    }\n    // (Copilot code end)\n    let hovering1, hovering2, hovering3, hovering4;\n    if (this.xAlign == \"center\") { //Para sincronizar o hovering com os align, e para verificar se há hovering.\n      hovering1 = localMouseX > this.x - ctx.measureText(this.text).width / 2 - this.hoveringHeightIncrement;\n      hovering2 = localMouseX < this.x + ctx.measureText(this.text).width / 2 + this.hoveringHeightIncrement;\n      hovering3 = localMouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n      hovering4 = localMouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n    } else if (this.xAlign == \"start\") {\n      hovering1 = localMouseX > this.x - this.hoveringHeightIncrement;\n      hovering2 = localMouseX < this.x + ctx.measureText(this.text).width + this.hoveringHeightIncrement;\n      hovering3 = localMouseY > this.y - this.textHeight / 2 - this.hoveringHeightIncrement;\n      hovering4 = localMouseY < this.y + this.textHeight / 2 + this.hoveringHeightIncrement;\n    } else {\n      console.error(\"Invalid xAlign value on TextButton.\");\n    }\n    this.internal_hovered = hovering1! && hovering2! && hovering3! && hovering4!;\n    if (this.internal_hovered) {\n      if (!this.internal_mouseEnter) {\n        this.internal_mouseEnter = true;\n        this.textHeight += this.hoveringHeightIncrement;\n      }\n      this.internal_mouseLeave = false;\n      this.outlineColor = \"black\";\n    } else {\n      if (!this.internal_mouseLeave) {\n        this.internal_mouseLeave = true;\n        this.textHeight -= this.hoveringHeightIncrement;\n      }\n      this.internal_mouseEnter = false;\n      this.internal_waitingForRelease = false;\n      this.outlineColor = transparent;\n    }\n  };\n  \n  onClickEvent () { /*collapseit*/\n    if (!this.isFocused()) {\n      return;\n    }\n    \n    if (this.internal_hovered) {\n      if (getMouse().isDown) { //Se isto for verdade, ou seja está-se clicando em cima do botão, só falta largar para a...\n        this.internal_waitingForRelease = true; //...condição seguinte ser executada.\n      }\n      if (!getMouse().isDown && this.internal_waitingForRelease) { //É isto que fica à espera de Release.\n        this.onclick && this.onclick();\n        this.internal_waitingForRelease = false;\n      }\n    }\n  };\n  \n  updateLanguage (){ /*collapseit*/\n    this.text = \"<!ERROR!>\";\n  };\n  \n  update () { /*collapseit*/\n    this.updateContext();\n    this.onhover();\n    this.onClickEvent();\n    this.updateLanguage();\n  };\n  \n  isFocused(): boolean {\n    // To prevent clicks and hover effects when it's not on the top window or\n    // on a GameState when there's no window open\n    if (this.parent instanceof JSWindow) {\n      return this.parent.isTopWindow();\n    } else if (this.parent instanceof GameState) {\n      // Check if an window is open\n      const jsWindows = JSWindow.getAllInstances() as Array<JSWindow>;\n      for (let i = 0; i < jsWindows.length; i++) {\n        if (jsWindows[i].visible) {\n          // If it's on a GameState and there's a window open, it's not focused\n          return false;\n        }\n      }\n      return true;\n    } else {\n      return true;\n    }\n  }\n}\n/*--------------------------------------Function-24-----------------------------------------------------------------*/\nfunction setMouseProvider(fn: () => {x: number, y: number, isDown: boolean}) {\n  mouseProvider = fn;\n}\n/*--------------------------------------Function-25-----------------------------------------------------------------*/\nfunction getMouse() {\n  if (mouseProvider) return mouseProvider();\n  return { x: 0, y: 0, isDown: false };\n}\n/*--------------------------------------Function-26-----------------------------------------------------------------*/\n/**\n * Supports both SVG and PNG.\n */\nclass JSImage extends Control {\n  src: string;\n  img: HTMLImageElement;\n  scale: number;\n  xAlign: \"left\" | \"middle\";\n  yAlign: \"top\" | \"middle\";\n  constructor(x: number, y: number, src: string, xAlign: \"left\" | \"middle\" = \"left\", yAlign: \"top\" | \"middle\" = \"top\") {\n    super(x, y);\n    this.src = src;\n    this.xAlign = xAlign;\n    this.yAlign = yAlign;\n    \n    this.img = new Image();\n    this.img.src = this.src;\n    \n    this.scale = 1;\n  }\n  \n  draw() {\n    const ctx = (window as any).globals.canvas.getContext('2d') as CanvasRenderingContext2D;\n    \n    ctx.save();\n    ctx.scale(this.scale, this.scale)\n    ctx.drawImage(\n      this.img,\n      this.x / this.scale - (this.xAlign === 'middle' ? this.img.width / 2 : 0),\n      this.y / this.scale - (this.yAlign === \"middle\" ? this.img.height / 2 : 0)\n    );\n    ctx.restore();\n  }\n}\n\nexport {\n  backToIndex,\n  element,\n  getRandomColor,\n  resizeCanvas,\n  toRadian,\n  toDegree,\n  random,\n  invertFraction,\n  distance,\n  download,\n  removeElement,\n  getCookie,\n  AnimationLOOP,\n  transparent,\n  Control,\n  Rectangle,\n  Circle,\n  Label,\n  // Button,\n  GameState,\n  JSWindow,\n  TextButton,\n  setMouseProvider,\n  JSImage\n};\n\n\n\n\n\n"],"names":["mouseProvider","backToIndex","currentURL","element","id","getRandomColor","letters","color","i","resizeCanvas","canvas","random","min","max","exp","rand","invertFraction","numerator","denominator","distance","x1","y1","x2","y2","difX","difY","download","url","downloadFrame","removeElement","elem","getCookie","cname","name","decodedCookie","ca","c","arr","property","control","functionSaved","functionSave","AnimationLOOP","funct","ctx","transparent","Control","x","y","__publicField","Rectangle","width","height","increment","count","Circle","radius","newX","newY","Label","text","xAlign","lines","lineHeight","startY","lineY","GameState","target","prop","value","contents","indices","controls","a","b","JSWindow","j","targetShowY","startShowY","targetHideY","showProgress","hideProgress","jsWindows","topWindow","topShowIndex","TextButton","textHeight","hoveringHeightIncrement","localMouseX","getMouse","localMouseY","inv","p","e","hovering1","hovering2","hovering3","hovering4","setMouseProvider","fn","JSImage","src","yAlign"],"mappings":"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"}