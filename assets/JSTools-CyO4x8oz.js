var C=Object.defineProperty;var P=(o,h,t)=>h in o?C(o,h,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[h]=t;var r=(o,h,t)=>P(o,typeof h!="symbol"?h+"":h,t);(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const e of s.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&i(e)}).observe(document,{childList:!0,subtree:!0});function t(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=t(n);fetch(n.href,s)}})();window.globals={windowRatio:void 0,canvasRatio:void 0,toolBarHeight:27,canvasScale:void 0};let f=null;function k(){var o=location.href;location.href=o.slice(0,o.lastIndexOf("/"))+"/index.html"}function T(o){return document.getElementById(o)}function W(){for(var o="0123456789ABCDEF",h="#",t=0;t<6;t++)h+=o[Math.floor(Math.random()*16)];return h}function L(){const o=window.globals.canvas;window.globals.windowRatio=window.innerWidth/(window.innerHeight-window.globals.toolBarHeight),window.globals.canvasRatio=o.width/o.height,window.globals.canvasRatio>window.globals.windowRatio?(o.style.width=window.innerWidth+"px",o.style.height="",o.style.left="0px",o.style.top=(window.innerHeight-window.globals.toolBarHeight)/2-window.innerWidth/window.globals.canvasRatio/2+window.globals.toolBarHeight+"px",window.globals.canvasScale=Number(o.style.width.replace("px",""))/o.width):window.globals.canvasRatio<=window.globals.windowRatio&&(o.style.width="",o.style.height=window.innerHeight-window.globals.toolBarHeight+"px",o.style.left=window.innerWidth/2-(window.innerHeight-window.globals.toolBarHeight)*window.globals.canvasRatio/2+"px",o.style.top=window.globals.toolBarHeight+"px",window.globals.canvasScale=Number(o.style.height.replace("px",""))/o.height)}function _(o,h,t){let i=Math.random();return i=i*(h-o)+o,t<1&&t>0?i=i*x(t,1):i=i/t,i=Math.round(i),t<1&&t>0?i/x(t,1):i*t}function x(o,h){return h/o}function c(o,h,t,i){var n=o-t,s=h-i;return Math.sqrt(Math.abs(n*n+s*s))}function M(o){var h=document.createElement("iframe");h.height="0px",h.width="0px",h.src=o,document.body.appendChild(h),setTimeout(function(){I(h)},1e4)}function I(o){o.parentNode.removeChild(o)}function F(o){for(var h=o+"=",t=decodeURIComponent(document.cookie),i=t.split(";"),n=0;n<i.length;n++){for(var s=i[n];s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(h)==0)return s.substring(h.length,s.length)}return""}Function.prototype.getAllInstances=function(){var o=[];for(let h in window)window[h]instanceof this&&o.push(window[h]);return o};Object.prototype.getAllProperties=function(){var o=[];for(let h in this)!this[h].toString().includes("getAllInstances")&&!this[h].toString().includes("getAllProperties")&&o.push(this[h]);return o};Array.prototype.getControlByName=function(o){return this.find(function(h){return h.name.toLowerCase()==o.toLowerCase()})};var m=!1,y;function A(o){const h=window.globals.canvas,t=h.getContext("2d");m||(y=o,m=!0),t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,h.width,h.height),y(),requestAnimationFrame(A)}var p="rgba(0,0,0,0)";class w{constructor(h,t){r(this,"x");r(this,"y");r(this,"initX");r(this,"initY");r(this,"color");r(this,"outlineColor");r(this,"outlineWidth");r(this,"visible");r(this,"showIndex");r(this,"parent");this.x=h,this.y=t,this.initX=h,this.initY=t,this.color=p,this.outlineColor="black",this.outlineWidth=2,this.visible=!0,this.showIndex=0,window[this.constructor.name+Math.random()*10**18]=this}show(){this.visible=!0}hide(){this.visible=!1}}class b extends w{constructor(t,i,n,s){super(t,i);r(this,"width");r(this,"height");r(this,"outlinePosition");r(this,"doPattern");this.width=n,this.height=s,this.outlineWidth=4,this.outlinePosition="center",this.doPattern=""}draw(){const t=window.globals.canvas.getContext("2d");this.visible&&(t.fillStyle=this.color,t.strokeStyle=this.outlineColor,t.lineWidth=this.outlineWidth,t.fillRect(this.x,this.y,this.width,this.height),this.drawParts_outline(),this.drawParts_patterns())}drawParts_outline(){const t=window.globals.canvas.getContext("2d");switch(this.outlinePosition.toLowerCase()){case"inner":t.strokeRect(this.x+this.outlineWidth/2,this.y+this.outlineWidth/2,this.width-this.outlineWidth,this.height-this.outlineWidth);break;case"center":t.strokeRect(this.x,this.y,this.width,this.height);break;case"outer":t.strokeRect(this.x-this.outlineWidth/2,this.y-this.outlineWidth/2,this.width+this.outlineWidth,this.height+this.outlineWidth);break}}drawParts_patterns(){const t=window.globals.canvas.getContext("2d");switch(this.doPattern.toLowerCase()){case"diagonals":t.beginPath();for(var i=this.x,n=this.y,s=this.x,e=this.y,a=6,l=0;i!=this.x+this.width;)i++,e++,l++,l==a&&(l=0,t.moveTo(i,n),t.lineTo(s,e));for(;e!=this.y+this.height;)n++,e++,l++,l==a&&(l=0,t.moveTo(i,n),t.lineTo(s,e));for(;n!=this.y+this.height;)n++,s++,l++,l==a&&(l=0,t.moveTo(i,n),t.lineTo(s,e));t.stroke(),this.x=this.initX,this.y=this.initY;break}}}class B extends w{constructor(t,i,n){super(t,i);r(this,"radius");this.radius=n}draw(){const t=window.globals.canvas.getContext("2d");this.visible&&(t.beginPath(),t.fillStyle=this.color,t.strokeStyle=this.outlineColor,t.lineWidth=this.outlineWidth,t.arc(this.x,this.y,this.radius,0,Math.PI*2),t.fill(),t.stroke())}goTo(t,i){this.x=t+this.radius,this.y=i+this.radius}}class H extends w{constructor(t,i,n,s){super(t,i);r(this,"text");r(this,"textHeight");r(this,"fontFamily");r(this,"xAlign");r(this,"yAlign");this.text=n,this.color="white",this.outlineColor=p,this.textHeight=30,this.fontFamily="Tahoma",this.xAlign=s,this.yAlign="middle"}updateContext(){const t=window.globals.canvas.getContext("2d");this.visible&&(t.fillStyle=this.color,t.textAlign=this.xAlign,t.textBaseline=this.yAlign,t.strokeStyle=this.outlineColor,t.lineWidth=this.outlineWidth,t.font="bold "+this.textHeight+"px "+this.fontFamily)}draw(){const t=window.globals.canvas.getContext("2d");if(this.visible){const i=this.text.split(/\r?\n/),n=this.textHeight*1.2;this.yAlign==="middle"?t.textBaseline="middle":this.yAlign==="top"&&(t.textBaseline="top");let s;this.yAlign==="middle"?s=this.y-(i.length-1)/2*n:s=this.y;for(let e=0;e<i.length;e++){const a=s+e*n;t.strokeText(i[e],this.x,a),t.fillText(i[e],this.x,a)}}}updateLanguage(){this.text="<!ERROR!>"}}class R extends b{constructor(){const t=window.globals.canvas;super(t.width/2-500,t.height/2-300,1e3,600);r(this,"container");this.outlinePosition="outer",this.color="#2f538e",this.visible=!1,this.container=new Proxy({},{set:(i,n,s)=>{if(i[n]=s,s&&typeof s=="object"&&"parent"in s)try{s.parent=this}catch{}return!0}})}draw(){const t=window.globals.canvas.getContext("2d");if(t.setTransform(1,0,0,1,0,0),super.draw(),this.visible){var i=this.container.getAllProperties(),n=[],s=[];for(let e=0;e<i.length;e++)typeof i[e]=="object"&&typeof i[e].showIndex=="number"&&(n.push(e),s.push(i[e]));s.sort((e,a)=>e.showIndex-a.showIndex);for(let e=0;e<s.length;e++)i[n[e]]=s[e];t.save(),t.translate(this.x,this.y);for(let e=0;e<i.length;e++)switch(typeof i[e]){case"object":i[e].update&&i[e].update(),i[e].updateLanguage&&i[e].updateLanguage(),i[e].updateContext&&i[e].updateContext(),i[e].drawText&&i[e].drawText(),i[e].checkPos&&i[e].checkPos(),i[e].draw&&i[e].draw(),i[e].updatePos&&i[e].updatePos(),i[e].delayStop&&i[e].delayStop();break;case"function":i[e].toString().includes("getAllInstances")||i[e].toString().includes("getAllProperties")||i[e]();break}t.restore()}}}class u extends b{constructor(t,i){const n=window.globals.canvas;super(n.width/2-t/2,-i,t,i);r(this,"maxYMoveSpeed");r(this,"showing");r(this,"hiding");r(this,"container");r(this,"parent");this.color="#1062e8",this.outlinePosition="inner",this.maxYMoveSpeed=40,this.showing=!1,this.hiding=!1,this.container=new Proxy({},{set:(s,e,a)=>{if(s[e]=a,a&&typeof a=="object"&&"parent"in a)try{a.parent=this}catch{}return!0}}),this.parent=void 0}draw(){const t=window.globals.canvas.getContext("2d");if(super.draw(),this.visible){var i=this.container.getAllProperties(),n=[],s=[];for(let e=0;e<i.length;e++)typeof i[e]=="object"&&typeof i[e].showIndex=="number"&&(n.push(e),s.push(i[e]));s.sort(function(e,a){return a.showIndex-e.showIndex});for(let e=0;e<s.length;e++)i[n[e]]=s[e];t.save(),t.translate(this.x,this.y);for(let e=0;e<i.length;e++)switch(typeof i[e]){case"object":i[e].update&&i[e].update(),i[e].updateLanguage&&i[e].updateLanguage(),i[e].updateContext&&i[e].updateContext(),i[e].drawText&&i[e].drawText(),i[e].checkPos&&i[e].checkPos(),i[e].draw&&i[e].draw(),i[e].updatePos&&i[e].updatePos(),i[e].delayStop&&i[e].delayStop();break;case"function":i[e].toString().includes("getAllInstances")||i[e].toString().includes("getAllProperties")||i[e]();break}t.restore()}}updatePos(){const t=window.globals.canvas,i=this.parent?-this.parent.y+t.height/2-this.height/2:t.height/2-this.height/2,n=this.parent?-this.parent.y-this.height:-this.height,s=this.parent?-this.parent.y+t.height:t.height,e=c(0,this.y,0,i)/c(0,n,0,i),a=c(0,this.y,0,s)/c(0,i,0,s);this.showing&&(this.visible=!0,this.y+=this.maxYMoveSpeed*e,Math.round(this.y)===Math.round(i)&&(this.showing=!1)),this.hiding&&(this.y+=this.maxYMoveSpeed*(1-a)+1,this.y>s&&(this.hiding=!1,this.visible=!1))}show(){const t=window.globals.canvas;this.x=this.parent?-this.parent.x+t.width/2-this.width/2:t.width/2-this.width/2,this.y=this.parent?-this.parent.y-this.height:-this.height,this.showing=!0,this.hiding=!1}hide(){const t=window.globals.canvas;this.x=this.parent?-this.parent.x+t.width/2-this.width/2:t.width/2-this.width/2,this.y=this.parent?-this.parent.y+t.height/2-this.height/2:t.height/2-this.height/2,this.showing=!1,this.hiding=!0}isTopWindow(){const t=u.getAllInstances();let i=null,n=-1/0;for(let s=0;s<t.length;s++)t[s].visible&&t[s].showIndex>n&&(n=t[s].showIndex,i=t[s]);return i===this}}class E extends H{constructor(t,i,n,s,e,a){super(t,i,n,s);r(this,"hoveringHeightIncrement");r(this,"onclick");r(this,"internal_hovered");r(this,"internal_waitingForRelease");r(this,"internal_mouseEnter");r(this,"internal_mouseLeave");this.outlineWidth=8,this.textHeight=e,this.hoveringHeightIncrement=a,this.onclick,this.internal_hovered=!1,this.internal_waitingForRelease=!1,this.internal_mouseEnter=!1,this.internal_mouseLeave=!0}onhover(){const t=window.globals.canvas.getContext("2d");if(!this.isFocused())return;let i=d().x,n=d().y;try{const g=t.getTransform();g.invertSelf();const v=new DOMPoint(d().x,d().y).matrixTransform(g);i=v.x,n=v.y}catch(g){console.warn("Could not invert canvas transform for mouse hit-testing.",g)}let s,e,a,l;this.xAlign=="center"?(s=i>this.x-t.measureText(this.text).width/2-this.hoveringHeightIncrement,e=i<this.x+t.measureText(this.text).width/2+this.hoveringHeightIncrement,a=n>this.y-this.textHeight/2-this.hoveringHeightIncrement,l=n<this.y+this.textHeight/2+this.hoveringHeightIncrement):this.xAlign=="start"?(s=i>this.x-this.hoveringHeightIncrement,e=i<this.x+t.measureText(this.text).width+this.hoveringHeightIncrement,a=n>this.y-this.textHeight/2-this.hoveringHeightIncrement,l=n<this.y+this.textHeight/2+this.hoveringHeightIncrement):console.error("Invalid xAlign value on TextButton."),this.internal_hovered=s&&e&&a&&l,this.internal_hovered?(this.internal_mouseEnter||(this.internal_mouseEnter=!0,this.textHeight+=this.hoveringHeightIncrement),this.internal_mouseLeave=!1,this.outlineColor="black"):(this.internal_mouseLeave||(this.internal_mouseLeave=!0,this.textHeight-=this.hoveringHeightIncrement),this.internal_mouseEnter=!1,this.internal_waitingForRelease=!1,this.outlineColor=p)}onClickEvent(){this.isFocused()&&this.internal_hovered&&(d().isDown&&(this.internal_waitingForRelease=!0),!d().isDown&&this.internal_waitingForRelease&&(this.onclick&&this.onclick(),this.internal_waitingForRelease=!1))}updateLanguage(){this.text="<!ERROR!>"}update(){this.updateContext(),this.onhover(),this.onClickEvent(),this.updateLanguage()}isFocused(){if(this.parent instanceof u)return this.parent.isTopWindow();if(this.parent instanceof R){const t=u.getAllInstances();for(let i=0;i<t.length;i++)if(t[i].visible)return!1;return!0}else return!0}}function O(o){f=o}function d(){return f?f():{x:0,y:0,isDown:!1}}class Y extends w{constructor(t,i,n,s="left",e="top"){super(t,i);r(this,"src");r(this,"img");r(this,"scale");r(this,"xAlign");r(this,"yAlign");this.src=n,this.xAlign=s,this.yAlign=e,this.img=new Image,this.img.src=this.src,this.scale=1}draw(){const t=window.globals.canvas.getContext("2d");this.img.complete&&this.img.naturalWidth>0&&this.img.naturalHeight>0&&(t.save(),t.scale(this.scale,this.scale),t.drawImage(this.img,this.x/this.scale-(this.xAlign==="middle"?this.img.width/2:0),this.y/this.scale-(this.yAlign==="middle"?this.img.height/2:0)),t.restore())}}export{A,w as C,R as G,u as J,H as L,b as R,E as T,Y as a,k as b,B as c,M as d,T as e,_ as f,F as g,c as h,W as i,L as r,O as s};
//# sourceMappingURL=JSTools-CyO4x8oz.js.map
