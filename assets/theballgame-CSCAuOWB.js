var P=Object.defineProperty;var J=(i,a,t)=>a in i?P(i,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[a]=t;var o=(i,a,t)=>J(i,typeof a!="symbol"?a+"":a,t);import{e as l,g as c,b as R,d as I,r as O,s as W,a as z,L as T,G as k,R as A,T as r,J as E,A as j}from"./JSTools-CXnOXMN4.js";function _(i){const a=window.globals.canvas;switch(i){case"en":document.cookie="language="+i+"; expires=Thu, 01 Jan 2040 00:00:00 UTC; path=/;",document.title="The Ball Game",a.innerHTML="Your browser doesn't support the HTML5 canvas tag.",l("backToIndex").innerHTML="Back",l("reloadButton").innerHTML="Reload",l("downloadGame").innerHTML="Download Game (Portuguese only)",window.globals.livesText_lang="Lives",window.globals.scoreText_lang="Score",window.globals.playGameOption_lang="Play",window.globals.optionsOption_lang="Options",window.globals.downloadOption_lang="Download",window.globals.optionsSoon_lang="Soon",window.globals.backToMenu_lang="Exit",window.globals.exitOptionsButton_lang="Back to Main Menu";break;default:localStorage.removeItem("language"),document.cookie="language=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",document.title="Jogo da Bolinha",a.innerHTML="O teu browser nÃ£o suporta a tag canvas do HTML5.",l("backToIndex").innerHTML="Voltar",l("reloadButton").innerHTML="Recarregar",l("downloadGame").innerHTML="Descarregar Jogo",window.globals.livesText_lang="Vidas",window.globals.scoreText_lang="PontuaÃ§Ã£o",window.globals.playGameOption_lang="Jogar",window.globals.optionsOption_lang="OpÃ§Ãµes",window.globals.downloadOption_lang="Descarregar",window.globals.optionsSoon_lang="Brevemente",window.globals.backToMenu_lang="Sair",window.globals.exitOptionsButton_lang="Voltar para o Menu Principal";break}}var u=l("dropdownLanguage");c("language")!=null&&c("language")!=""?u.value=c("language"):u.value="pt";const f=l("canvas");if(f==null)throw new Error("Canvas is null.");window.globals.canvas=f;const g=l("background");document.body.onresize=p;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{p(),_(c("language"))}):(p(),_(c("language")));l("backToIndex").onclick=R;l("reloadButton").onclick=()=>location.reload(!0);l("downloadGame").onclick=()=>I("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1");u.onchange=()=>_(u.value);const M=f.getContext("2d");if(M==null)throw new Error("Canvas context is null.");const D=l("toolBar");D&&(D.style.height=window.globals.toolBarHeight+"px");f.style.top=window.globals.toolBarHeight+"px";g.style.width=innerWidth+"px";g.style.height=innerHeight+"px";M.lineJoin="round";var w=new Audio("resources/Click.wav"),F=new Audio("resources/BellRing.wav");O();const m=window.globals.canvas;var s;let y=!1,b=!1,x=!1,v=!1;document.body.onkeydown=function(i){s=i.which||i.keyCode||i.code,(s===38||s===87)&&(y=!0),(s===37||s===65)&&(b=!0),(s===39||s===68)&&(x=!0),(s===40||s===83)&&(v=!0)};document.body.onkeyup=function(i){s=i.which||i.keyCode||i.code,(s===38||s===87)&&(y=!1),(s===37||s===65)&&(b=!1),(s===39||s===68)&&(x=!1),(s===40||s===83)&&(v=!1)};let S,X,L;document.body.onmousemove=function(i){const a=m.getBoundingClientRect(),t=i.clientX-a.left,h=i.clientY-a.top;S=t*(m.width/a.width),X=h*(m.height/a.height)};document.body.onmousedown=function(){L=!0};document.body.onmouseup=function(){L=!1};document.body.onresize=p;function p(){O(),g.style.width=innerWidth+"px",g.style.height=innerHeight+"px"}W(()=>({x:S,y:X,isDown:L}));function Y(i){typeof i.upIsDown=="boolean"&&(y=i.upIsDown),typeof i.leftIsDown=="boolean"&&(b=i.leftIsDown),typeof i.rightIsDown=="boolean"&&(x=i.rightIsDown),typeof i.downIsDown=="boolean"&&(v=i.downIsDown)}window.globals.canvas.getContext("2d");class B extends T{constructor(t,h,C,H,G){super(t,h,"",H);o(this,"type");o(this,"count");switch(this.type=C,this.count=G,this.type.toLowerCase()){case"lives":this.text=window.globals.livesText_lang;break;case"score":this.text=window.globals.scoreText_lang;break}}}class V extends z{constructor(t,h){super(t,h,15);o(this,"speedX",0);o(this,"speedY",0);o(this,"color","#0000FF");o(this,"walkSpeed",2);o(this,"jumpSpeed",20);o(this,"side","left");o(this,"touchingLava",!1);o(this,"delaying",!1);o(this,"delayed",0);o(this,"finalDelayTime",0);o(this,"lives");o(this,"score");o(this,"initX");o(this,"initY");o(this,"visible",!0);this.initX=t,this.initY=h,this.lives=new B(10,40,"lives","start",5),this.score=new B(10,80,"score","start",0)}drawText(){this.lives.text=window.globals.livesText_lang+" = "+this.lives.count,this.lives.updateContext(),this.lives.draw(),this.score.text=window.globals.scoreText_lang+" = "+this.score.count,this.score.updateContext(),this.score.draw()}updateX(){this.delaying||(this.speedX*=.7,b&&this.x>this.radius&&(this.speedX-=this.walkSpeed),x&&this.x<e.width-this.radius&&(this.speedX+=this.walkSpeed),this.x+=this.speedX,this.x<this.radius&&(this.speedX<0&&w.play(),this.speedX=0,this.x=this.radius),this.x>e.width-this.radius&&(this.speedX>0&&w.play(),this.speedX=0,this.x=e.width-this.radius))}updateY(){this.delaying||(this.speedY===1&&this.y>e.height-this.radius-1&&y&&(this.speedY=-this.jumpSpeed),v&&(this.speedY+=1),this.y+=this.speedY,this.y>e.height-this.radius&&(this.speedY>10&&w.play(),this.speedY=0,this.y=e.height-this.radius),this.speedY++,this.y<this.radius&&(this.speedY<-10&&w.play(),this.speedY=0,this.y=this.radius))}checkPos(){if(!this.delaying){const t=e.container.lava;this.y>t.y-this.radius&&this.x>t.x-this.radius+5&&this.x<t.x+t.width+5&&(this.speedX=0,this.speedY=0,this.y=t.y-this.radius,this.touchingLava=!0),this.x>t.x-this.radius&&this.y>t.y-this.radius&&this.x<t.x+t.width/2&&(this.speedX=0,this.x=t.x-this.radius,this.touchingLava=!0),this.x>t.x+t.width/2&&this.y>t.y-this.radius&&this.x<t.x+t.width+this.radius&&(this.speedX=0,this.x=t.x+t.width+this.radius,this.touchingLava=!0),(this.touchingLava||this.delayed>0)&&(this.touchingLava=!1,this.delayed===0&&this.delay(100),!this.delaying&&this.delayed===1&&(F.play(),this.delay(650)),!this.delaying&&this.delayed===2&&(this.lives.count--,this.delay(650)),!this.delaying&&this.delayed>=2&&(this.side="left",this.x=100+this.radius,this.y=e.height/2+this.radius,this.speedX=0,this.speedY=5,this.delayed=0,this.lives.count<=0&&(alert(`Perdeste com ${this.score.count} Ponto${this.score.count===1?"":"s"}!!`),this.score.count=0,this.lives.count=5,Y({upIsDown:!1,rightIsDown:!1,leftIsDown:!1})))),this.side==="left"&&this.x>e.width/2&&this.y>e.height-this.radius-2&&(this.side="right",this.score.count++),this.side==="right"&&this.x<e.width/2&&this.y>e.height-this.radius-2&&(this.side="left",this.score.count++)}}updatePos(){this.updateX(),this.updateY()}delay(t){this.finalDelayTime=Date.now()+t,this.delaying=!0,this.delayed++}delayStop(){this.delaying&&Date.now()>this.finalDelayTime&&(this.delaying=!1,this.finalDelayTime=0)}restart(){this.x=this.initX,this.y=this.initY,this.walkSpeed=2,this.jumpSpeed=20,this.lives.count=5,this.score.count=0,this.side="left",this.touchingLava=!1,this.delaying=!1,this.delayed=0,this.finalDelayTime=0,this.speedX=0,this.speedY=0,this.visible=!0}}window.globals.canvas.getContext("2d");var e=new k,n=new k,d=new k;n.visible=!0;e.container.player=new V(115,e.height/2+15);e.container.lava=new A(e.width/2-50,e.height-130,100,130);e.container.lava.doPattern="diagonals";e.container.lava.color="orange";e.container.lava.outlineColor="red";e.container.lava.outlineWidth=2;e.container.lava.outlinePosition="inner";e.container.backToMenu_opt=new r(e.width/2,50,window.globals.backToMenu_lang,"center",40,5);e.container.backToMenu_opt.updateLanguage=function(){this.text=window.globals.backToMenu_lang};n.container.playGame_opt=new r(e.width/2,130,window.globals.playGameOption_lang,"center",50,5);n.container.playGame_opt.updateLanguage=function(){this.text=window.globals.playGameOption_lang};n.container.options_opt=new r(e.width/2,220,window.globals.optionsOption_lang,"center",50,5);n.container.options_opt.updateLanguage=function(){this.text=window.globals.optionsOption_lang};n.container.download_opt=new r(e.width/2,310,window.globals.downloadOption_lang,"center",50,5);n.container.download_opt.updateLanguage=function(){this.text=window.globals.downloadOption_lang};d.container.exitOptions_opt=new r(30,30,window.globals.exitOptionsButton_lang,"start",30,5);d.container.exitOptions_opt.updateLanguage=function(){this.text=window.globals.exitOptionsButton_lang};d.container.optionsSoon=new T(e.width/2,e.height/2-15,window.globals.optionsSoon_lang,"center");d.container.optionsSoon.textHeight=100;d.container.optionsSoon.updateLanguage=function(){this.text=window.globals.optionsSoon_lang};e.container.backToMenu_opt.onclick=function(){e.visible=!1,n.visible=!0,d.visible=!1},n.container.playGame_opt.onclick=function(){e.visible=!0,n.visible=!1,d.visible=!1,e.container.player.restart()},n.container.options_opt.onclick=function(){e.visible=!1,n.visible=!1,d.visible=!0},n.container.download_opt.onclick=function(){I("https://www.dropbox.com/s/0stlwtfyvryq57w/Jogo%20da%20Bolinha.rar?dl=1")},d.container.exitOptions_opt.onclick=function(){e.visible=!1,n.visible=!0,d.visible=!1};n.container.w=new E(700,500);n.container.w.container.closeButton=new r(680,20,"X","center",20,5);n.container.w.container.closeButton.updateLanguage=function(){this.text="X"};n.container.w.container.closeButton.onclick=()=>{n.container.w.hide()};n.container.w.container.welcomemsg=new T(350,250,"Welcome! ðŸ˜€","center");n.container.w.container.welcomemsg.updateLanguage=function(){this.text="Welcome! ðŸ˜€"};n.container.w.visible=!0;n.container.w.show();window.globals.mainMenu=n;j(function(){e.draw(),n.draw(),d.draw(),$()});function $(){document.hasFocus()||Y({upIsDown:!1,leftIsDown:!1,rightIsDown:!1}),new Date().getTime()}
//# sourceMappingURL=theballgame-CSCAuOWB.js.map
